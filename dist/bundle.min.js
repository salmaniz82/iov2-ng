var AngularNotifyModule=angular.module("angularNotify",["ng"]);AngularNotifyModule.config(["$provide",function(e){e.decorator("$rootScope",["$delegate",function(e){return Object.defineProperty(e.constructor.prototype,"$onRootScope",{value:function(n,t){var o=e.$on(n,t);return this.$on("$destroy",o),o},enumerable:!1}),e}])}]),AngularNotifyModule.directive("notifybar",[function(){return{restrict:"EAC",link:function(e,n,t){e.$onRootScope("notify",(function(t,o){if(-1!==$.inArray(o.type,["success","info","warning","error"])&&"string"==typeof o.title&&0!==o.title.length){var i=function(n){notifyContainer=document.createElement("div");var t=document.createElement("p");if(t.className+=" title",t.innerHTML=n.title,notifyContainer.appendChild(t),"string"==typeof n.content&&0!==n.content.length){var o=document.createElement("p");o.className+=" content",o.innerHTML=n.content,notifyContainer.appendChild(o)}var i=document.createElement("button");switch(i.className+=" close",i.innerHTML='<i class="fal fa-times"></i>',i.addEventListener("click",(function(){a.hideFunc()})),notifyContainer.appendChild(i),notifyContainer.className+="angular-notify",n.type){case"success":notifyContainer.className+=" angular-notify-success",e.$emit("playSound",{message:n.type});break;case"info":notifyContainer.className+=" angular-notify-info",e.$emit("playSound",{message:n.type});break;case"warning":notifyContainer.className+=" angular-notify-warning",e.$emit("playSound",{message:n.type});break;case"error":notifyContainer.className+=" angular-notify-error",e.$emit("playSound",{message:n.type})}notifyContainer.className+=" angular-notify-enter";var a={domElem:notifyContainer,removeDom:function(){$(this.domElem).remove()},hideFunc:function(){$(this.domElem).removeClass("angular-notify-enter"),$(this.domElem).addClass("angular-notify-hide"),setTimeout((function(){a.removeDom()}),320)}};return a}(o),a=o.timeout||3200;n[0].appendChild(i.domElem);var r=setTimeout((function(){i.hideFunc()}),a);$(i.domElem).mouseenter((function(){window.clearTimeout(r)})).mouseleave((function(){r=setTimeout((function(){i.hideFunc()}),a)}))}}))}}}]);
angular.module("io2v3",["ui.router","loadingStatus","angularNotify","ngSanitize"]).constant("API_URL","alpha.iskillmetrics.com"==location.hostname?"https://api.iskillmetrics.com/":"http://api.io2v3.dvp/").constant("SITE_URL","alpha.iskillmetrics.com"==location.hostname?"https://alpha.iskillmetrics.com/":"http://localhost:8000/"),angular.module("io2v3").run(["$rootScope","$state","$stateParams","$window","auth","$anchorScroll",function(t,o,a,n,e,l){t.$on("$stateChangeStart",(function(a,n,l,i,s,r){if(null!=t.pooling&&t.pooling.abort(),null!=t.studenExamListPooling&&t.studenExamListPooling.abort(),1==n.authenticate){if(e.hastokenAndUser()||(a.preventDefault(),o.go("logout")),null!=n.roles){var u=e.getUser().role;-1!=n.roles.indexOf(u)||(a.preventDefault(),o.go("logout"))}null!=n.permission&&0==e.userHasPermission(n.permission)&&(a.preventDefault(),o.go("logout"))}})),t.$on("$stateChangeSuccess",(function(a,n,e,l,i){t.pageTitle=o.current.data.pageTitle})),t.$on("$stateChangeError",(function(t,o,a,n,e,l){console.log(l)}))}]);
angular.module("loadingStatus",[]).config(["$httpProvider",function(t){t.interceptors.push("loadingStatusInterceptor")}]).directive("loadingStatusMessage",[function(){return{link:function(t,n,o){var e=function(){n.css("display","none")};t.$on("loadingStatusActive",(function(){n.css("display","block")})),t.$on("loadingStatusInactive",e),e()}}}]).factory("loadingStatusInterceptor",["$q","$rootScope",function(t,n){var o=0,e=function(){0==--o&&n.$broadcast("loadingStatusInactive")};return{request:function(e){return 0==o&&n.$broadcast("loadingStatusActive"),o++,e||t.when(e)},response:function(n){return e(),n||t.when(n)},responseError:function(n){return e(),t.reject(n)}}}]);
!function(){function e(e,t,a){a.html5Mode({enabled:!0,requireBase:!0}),t.otherwise("notfound"),e.state("pub",{templateUrl:"views/templates/publicTemplate.html",abstract:!0}).state("pub.home",{url:"/",templateUrl:"views/home.html",controller:"homeCtrl",data:{pageTitle:"- Home"}}).state("pub.about",{url:"/about",templateUrl:"views/about.html",data:{pageTitle:"- About"}}).state("pub.tos",{url:"/term-service",templateUrl:"views/terms-service.html",data:{pageTitle:"- Terms of services"}}).state("pub.pp",{url:"/privacy-policy",templateUrl:"views/privacy-policy.html",data:{pageTitle:"- Privacy Policy"}}).state("exm",{abstract:!0,templateUrl:"views/templates/tab.layout.html",controller:"examMgmtAbstractCtrl as exAbs"}).state("exm.exam",{url:"/exam-overview/:examID",templateUrl:"views/exams/exam-overview.html",controller:"examOverviewCtrl as vm",data:{pageTitle:"- Quiz detail overview"}}).state("exm.quizQuestions",{url:"/quiz-questions/:examID",templateUrl:"views/exams/quiz-questions.html",controller:"quizQuestionsCtrl as vm",data:{pageTitle:"- Quiz questions"}}).state("exm.addQuizQuestions",{url:"/add-quiz-questions/:examID",templateUrl:"views/dash/que-add.html",controller:"queAddCtrl as vm",data:{pageTitle:"- Add quiz questions"},resolve:{queGlobalData:["quizDataService",function(e){return e.queGlobalFetch()}]}}).state("exm.quizOverview",{url:"/exam-quiz-overview",templateUrl:"views/exams/quiz-attempt-overview.html",data:{pageTitle:"- Quiz attempts overview"}}).state("exm.enroll",{url:"/exam-enroll/:examID",templateUrl:"views/exams/exam-enroll.html",controller:"enrollCtrl as vm",data:{pageTitle:"- Quiz enrollments"}}).state("exm.register",{url:"/exam-register/:examID",templateUrl:"views/exams/exam-register.html",controller:"registerEnrollCtrl as vm",data:{pageTitle:"- Quiz register"}}).state("exm.progress",{url:"/exam-progress/:examID",templateUrl:"views/exams/exam-progress.html",controller:"quizProgressCtrl as vm",data:{pageTitle:"- Quiz progress"}}).state("exm.prog-detail",{url:"/exam-progress-detail",templateUrl:"views/exams/exam-progress-detail.html",data:{pageTitle:"- Quiz progress details"}}).state("exm.answer",{url:"/exams/answer/:examID/:attemptID",templateUrl:"views/exams/answer-sheet.html",controller:"quizAnswerInpectCtrl as vm",data:{pageTitle:"- Quiz response answers"}}).state("exm.consent",{url:"/exams/consent/:examID/:attemptID",templateUrl:"views/exams/consent.html",controller:"quizAnswerConsentCtrl as vm",data:{pageTitle:"- Quiz consent"}}).state("exm.scorecard",{url:"/exams/scorecard/:examID/:attemptID",templateUrl:"views/exams/scorecard.html",controller:"quizScoreCardCtrl as vm",data:{pageTitle:"- Quiz scorecard"}}).state("exm.quizWeightDistro",{url:"/quiz-weight-distro/:examID",templateUrl:"views/exams/quiz-weight-distro.html",controller:"quizWeightDistroCtrl as vm",data:{pageTitle:"- Quiz weight distribution"}}).state("exm.quizEvaluate",{url:"/quiz-evaluate",templateUrl:"views/exams/quiz-evaluate.html",data:{pageTitle:"- Quiz evaluation"}}).state("exm.notify",{url:"/notify",templateUrl:"views/notify.html",controller:"notifyCtrl as vm",data:{pageTitle:"- Notify"}}).state("dash",{templateUrl:"views/templates/tab.layout.html",controller:"dashboardCtrl as dash",abstract:!0}).state("dash.land",{url:"/dashboard",templateUrl:"views/dash-landing.html",controller:"dashLandCtrl as vm",authenticate:!0,data:{pageTitle:"- Dashboard Landing"}}).state("dash.profile",{url:"/profile",templateUrl:"views/dash/profile.html",controller:"dashProfileCtrl as vm",data:{pageTitle:"- Profile"}}).state("std.profile",{url:"/account-details",template:"<h2>Profile Settings are not avaialable</h2>",data:{pageTitle:"- Canidate profile"}}).state("dash.admindashboard",{url:"/dashboard",template:"<h1>Admin dashboard is under  contruction please login with : abf@domain.com to view entity dashboard</h1>",data:{pageTitle:"- Adminstration dashboard"}}).state("dash.entityDashbaord",{url:"/dashboard",templateUrl:"views/dashboard-entity.html",controller:"dashboardEntityCtrl as vm",data:{pageTitle:"- Dashboard"},authenticate:!0,roles:["entity"]}).state("dash.contributorDashbaord",{url:"/dashboard",template:"<h2>Contributor dashboard is under construction</h2>",data:{pageTitle:"- Dashboard"},authenticate:!0,roles:["contributor"]}).state("dash.contDevDashbaord",{url:"/dashboard",template:"<h2> Content Developer Dashboard is under construction </h2>",data:{pageTitle:"- Dashboard"},authenticate:!0,roles:["content developer"]}).state("std.studentDashbaord",{url:"/dashboard",template:"<h2> Dashboard settings for candiates are not yet not available. </h2>",controller:"studentDashboardCtrl as vm",authenticate:!0,roles:["students","candidate"],data:{pageTitle:"- Dashboard"}}).state("dash.quizzes",{url:"/quizzes",templateUrl:"views/dash/dash-quizzes.html",controller:"dashQuizzesCtrl as vm",authenticate:!0,roles:["admin","entity","invigilator"],data:{pageTitle:"- Quizzes"}}).state("dash.cats",{url:"/categories",templateUrl:"views/dash/categories.html",controller:"categoriesCtrl as vm",authenticate:!0,roles:["admin","content developer"],data:{pageTitle:"- Categories"}}).state("dash.catree",{url:"/cat-tree",templateUrl:"views/dash/cat-tree.html",controller:"catTreeCtrl as vm",data:{pageTitle:"- Category Tree"}}).state("dash.quePool",{url:"/que-pool",templateUrl:"views/dash/que-pool.html",controller:"quepoolCtrl as vm",data:{pageTitle:"- Questions Pool"}}).state("dash.questions",{url:"/questions",templateUrl:"views/dash/questions.html",controller:"questionsCtrl as vm",authenticate:!0,roles:["admin","content developer","contributor","entity"],data:{pageTitle:"- Dashboard Questions"}}).state("dash.queadd",{url:"/question-add",templateUrl:"views/dash/que-add.html",controller:"queAddCtrl as vm",data:{pageTitle:"- Questions Add"},resolve:{queGlobalData:["quizDataService",function(e){return e.queGlobalFetch()}]}}).state("dash.queupload",{url:"/question-upload",templateUrl:"views/dash/questions-upload.html",controller:"questionUploadCtrl as vm",data:{pageTitle:"- Questions upload"},resolve:{queGlobalData:["quizDataService",function(e){return e.queGlobalFetch()}]}}).state("dash.questionedit",{url:"/question-edit/:queID",templateUrl:"views/dash/que-edit.html",controller:"questionEditCtrl as vm",resolve:{queGlobalData:["quizDataService",function(e){return e.queGlobalFetch()}]},authenticate:!0,roles:["admin","entity","contributor","content developer"],data:{pageTitle:"- Edit questions"}}).state("dash.users",{url:"/users",templateUrl:"views/dash/users.html",controller:"usersCtrl as vm",authenticate:!0,roles:["admin"],data:{pageTitle:"- Users"}}).state("dash.myusers",{url:"/my-users",templateUrl:"views/dash/my-users.html",controller:"myusersCtrl as vm",authenticate:!0,roles:["entity"],data:{pageTitle:"- My Users"}}).state("dash.roles",{url:"/roles",templateUrl:"views/dash/roles.html",controller:"rolesCtrl as vm",authenticate:!0,roles:["admin"],data:{pageTitle:"- Roles"}}).state("dash.permission",{url:"/permissions",templateUrl:"views/dash/permissions.html",controller:"permissionsCtrl as vm",authenticate:!0,roles:["admin"],data:{pageTitle:"- Permissions"}}).state("dash.rolePermissions",{url:"/role-permissions",templateUrl:"views/dash/role-permissions.html",controller:"rolePermissionsCtrl as vm",authenticate:!0,roles:["admin"],data:{pageTitle:"- Role Permissions"}}).state("dash.library",{url:"/library",templateUrl:"views/dash/library.html",controller:"libraryCtrl as vm",authenticate:!0,permission:["media-list"],data:{pageTitle:"- Media Library"}}).state("dash.modal",{url:"/modal",templateUrl:"views/modal.html",controller:"modalCtrl as vm",data:{pageTitle:"- Modal "}}).state("dash.batches",{url:"/groups",templateUrl:"views/dash/batches.html",controller:"batchesCtrl as vm",authenticate:!0,permission:["batch-list"],data:{pageTitle:"- Batches"}}).state("ua",{abstract:!0,template:"<ui-view/>"}).state("ua.login",{url:"/login?actiontoken&redirectUrl",templateUrl:"views/login.html",controller:"loginCtrl as vm",data:{pageTitle:"- Login"}}).state("ua.register",{url:"/register",templateUrl:"views/register.html",controller:"registerCtrl as vm",data:{pageTitle:"- Register"}}).state("ua.forget",{url:"/forget",controller:"forgetCtrl as vm",templateUrl:"views/forget.html",data:{pageTitle:"- Forget Password"}}).state("ua.recovery",{url:"/recover?accesstoken",controller:"recoverCtrl as vm",templateUrl:"views/recover.html",data:{pageTitle:"- Recover forgotten password"}}).state("logout",{url:"/logout",controller:"logoutCtrl as vm",data:{pageTitle:"- Logout"}}).state("onExamRefresh",{url:"/examrefreshed/:attempt_id/:quiz_id",templateUrl:"views/student/onexamrefresh.html",controller:"examRefreshedCtrl as vm",data:{pageTitle:"- Quiz Terminated"}}).state("quizcomplited",{url:"/quizcomplited",templateUrl:"views/student/quizcomplited.html",controller:"quizcomplitedCtrl as vm",data:{pageTitle:"- Quiz Finished"}}).state("std",{templateUrl:"views/templates/tab.student.layout.html",controller:"stdCtrl as std",abstract:!0}).state("std.exams",{url:"/stexams",templateUrl:"views/student/exams.html",controller:"stdExamCtrl as vm",data:{pageTitle:"- Quizzes"}}).state("std.quiz",{url:"/quiz",controller:"stdQuizCtrl as vm",templateUrl:"views/student/quiz.html",data:{pageTitle:"- Canidates Quizzes"}}).state("quizPlay",{url:"/quiz-assement/:attempt_id/:quiz_id",templateUrl:"views/student/quiz-play.html",controller:"quizAttemptCtrl as vm",resolve:{quizPlayData:["quizPlay","$stateParams",function(e,t){var a=t.attempt_id,l=t.quiz_id;return e.prepQuizQuestion(l,a)}]},authenticate:!0,roles:["students","student","candidate"],data:{pageTitle:"- Quiz Attempt"}}).state("quizPlayDLS",{url:"/quiz-assessment/dls/:attempt_id/:quiz_id",templateUrl:"views/student/dynamic-quiz.html",controller:"quizDlsCtrl as vm",resolve:{quizPlayData:function(e,t){var a=t.attempt_id,l=t.quiz_id;return e.dlsPrep(l,a)}},authenticate:!0,roles:["students","student","candidate"],data:{pageTitle:"- Quiz Attempt"}}).state("questionPreview",{url:"/questionpreview/:questionId",templateUrl:"views/question-preview.html",controller:"questionPreviewCtrl as vm",data:{pageTitle:"- Question Preview"}}).state("inv",{templateUrl:"views/templates/inv.invited.html",abstract:!0,controller:"invitedAbstractCtrl as vm"}).state("inv.invited",{url:"/i/:entityslug/:invitetoken",templateUrl:"views/student/invited.html",controller:"invitedbyentityCtrl as vm",data:{pageTitle:"- Invited to quiz"}}).state("dash.quizWizard",{url:"/new-quiz-wizard",templateUrl:"views/new-quiz-wizard.html",controller:"newQuizWizardCtrl as vm",resolve:{wizardPreset:["quizWizardService",function(e){return e.getPresetValues()}]},data:{pageTitle:"- Add New Quiz Wizard"}}).state("message",{url:"/message",templateUrl:"views/message.html",controller:"messageCtrl as vm",data:{pageTitle:"- Message"}}).state("quizui",{url:"/quizui",templateUrl:"views/student/quizui.html"}).state("mob",{templateUrl:"views/templates/tab.mobile.layout.html",controller:"mobileAbstractCtrl as vm",abstract:!0}).state("mob.activity",{url:"/activity",templateUrl:"views/mobile/activity.html",controller:"mobileActivityCtrl as vm",authenticate:!0,permission:"activity-monitor",data:{pageTitle:"- Quiz Activity"}}).state("notfound",{url:"/notfound",templateUrl:"views/404.html",data:{pageTitle:"- Page Not found"}})}angular.module("io2v3").config(e),e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}();
angular.module("io2v3").component("quizInfoComponent",{templateUrl:"views/shared/quizInfo.html",controller:["$scope","$http","quizDataService",function(n,t,o){var a=this;o.getMasterQuiz(a.param).then((function(n){a.Quiz=n.data.quiz[0]}),(function(n){a.loadProgress=!1}))}],bindings:{param:"="}});
angular.module("io2v3").directive("backButton",[function(){return{restrict:"A",link:function(n,t,i,c){t.on("click",(function(n){history.back(),n.preventDefault()}))}}}]);
angular.module("io2v3").directive("ckeditor",[function(){return{require:"?ngModel",link:function(e,n,t,i){var o=CKEDITOR.replace(n[0],{on:{instanceReady:function(e){this.focus(),$("iframe.cke_wysiwyg_frame",e.editor.container.$).contents().on("click",(function(){e.editor.focus()}))}}});o.on("pasteState",(function(){e.$apply((function(){i.$setViewValue(o.getData())}))})),i.$render=function(e){o.setData(i.$modelValue)}}}}]);
angular.module("io2v3").directive("pickDt",[function(){return{restrict:"C",require:"ngModel",link:function(e,i,n,t){i.datetimepicker({format:"yyyy-MM-dd hh:mm",pickDate:!0,pickTime:!0,pick12HourFormat:!1,pickSeconds:!1,language:"en",onSelect:function(i){e.$apply((function(){t.$setViewValue(i)}))}})}}}]);
angular.module("io2v3").directive("dropzone",[function(){return function(n,o,e){var r,a;o.addClass("dropzone"),r=n[e.dropzone],a=new Dropzone(o[0],r.options),angular.forEach(r.eventHandlers,(function(n,o){a.on(o,n)}))}}]);
angular.module("hdtest",[]).controller("dzCtrl",["$scope",function(n){n.dropzoneConfig={options:{url:"http://api.haladrive.local/uploadslides/69"},eventHandlers:{sending:function(n,o,e){},success:function(n,o){console.log("file is sent")}}}}]).directive("dropzone",[function(){return function(n,o,e){var r,t;o.addClass("dropzone"),r=n[e.dropzone],t=new Dropzone(o[0],r.options),angular.forEach(r.eventHandlers,(function(n,o){t.on(o,n)}))}}]);
angular.module("io2v3").directive("fileInput",["$parse",function(n){return{link:function(i,e,t){e.on("change",(function(l){l.target.files;n(t.fileInput).assign(i,e[0].files),i.$apply()}))}}}]);
angular.module("io2v3").directive("modalTrigger",[function(){return{restrict:"C",link:function(e,n,r,l){n.bind("click",(function(e){console.log(r.href),angular.element(document.querySelector(r.href)).modal(),e.preventDefault()}))}}}]);
function permissionDirective(i){return{restrict:"A",scope:{permissions:"="},link:function(e,s,n){e.$watch(i.isLoggedIn(),(function(){i.userHasPermission(e.permissions)?s.show():s.remove()}))}}}angular.module("io2v3").directive("permissions",permissionDirective),permissionDirective.$inject=["auth"];
angular.module("io2v3").directive("staticLink",[function(){return vm=this,{restrict:"C",link:function(n,t,i,e){t.on("click",(function(n){n.preventDefault()}))}}}]).directive("dropdownButton",[function(){return vm=this,{restrict:"C",link:function(n,t,i,e){t.on("click",(function(n){n.preventDefault()}))}}}]).directive("ngEnter",[function(){return function(n,t,i){t.bind("keydown keypress",(function(t){13===t.which&&(n.$apply((function(){n.$eval(i.ngEnter)})),t.preventDefault())}))}}]);
angular.module("io2v3").directive("stringToNumber",[function(){return{require:"ngModel",link:function(r,n,e,u){u.$parsers.push((function(r){return""+r})),u.$formatters.push((function(r){return parseFloat(r)}))}}}]);
angular.module("io2v3").directive("timePicker",[function(){return{restrict:"C",link:function(e,t,c,n){t.pickatime({default:"now",fromnow:3e3,twelvehour:!0,donetext:"OK",cleartext:"Clear",canceltext:"Cancel",autoclose:!0,ampmclickable:!0,aftershow:function(){}})}}}]);
function passwordVerify(){return{restrict:"A",require:"?ngModel",link:function(r,i,e,o){if(o){r.$watch(e.ngModel,(function(){n()})),e.$observe("passwordVerify",(function(r){n()}));var n=function(){var r=o.$viewValue,i=e.passwordVerify;o.$setValidity("passwordVerify",r===i)}}}}}angular.module("io2v3").directive("passwordVerify",passwordVerify);
angular.module("io2v3").factory("authInterceptor",["$injector","$q","$location",function(t,e,o){return oAuthIntercept={},oAuthIntercept.request=function(t){var e,o;return t.headers=t.headers||{},localStorage.auth_token&&(t.headers.token=localStorage.auth_token),t.headers.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone,t.headers.timeOffset=(e=(new Date).getTimezoneOffset(),o=Math.abs(e),(e<0?"+":"-")+("00"+Math.floor(o/60)).slice(-2)+":"+("00"+o%60).slice(-2)),t},oAuthIntercept.responseError=function(t){return 401==t.status&&(console.log("throw it out"),o.path("/logout")),e.reject(t)},oAuthIntercept}]).config(["$httpProvider",function(t){t.interceptors.push("authInterceptor")}]);
angular.module("io2v3").filter("contains",[function(){return function(n,i){return n.indexOf(i)>=0}}]);
angular.module("io2v3").filter("titleCase",[function(){return function(r){return(r=r||"").replace(/\w\S*/g,(function(r){return r.charAt(0).toUpperCase()+r.substr(1).toLowerCase()}))}}]).filter("trustUrl",["$sce",function(r){return function(t){return r.trustAsResourceUrl(t)}}]).filter("setDecimal",[function(r){return function(r,t){if(isNaN(r))return r;var e="1"+Array(+(t>0&&t+1)).join("0");return Math.round(r*e)/e}}]);
angular.module("io2v3").filter("xToTime",[function(){return function(o){var a,r,t,e=new Date(o);return a=e,r=Math.floor((new Date-a)/1e3),(t=Math.floor(r/31536e3))>1?t+" years ago":(t=Math.floor(r/2592e3))>1?t+" months ago":(t=Math.floor(r/86400))>1?t+" days ago":(t=Math.floor(r/3600))>1?t+" hours ago":(t=Math.floor(r/60))>1?t+" minutes ago":Math.floor(r)+" seconds ago"}}]);
angular.module("io2v3").service("auth",["$http","API_URL","$cacheFactory",function(t,e,i){self=this,this.login=function(i){var s=e+"login";return t.post(s,{email:i.email,password:i.password})},this.logout=function(){localStorage.removeItem("auth_token"),localStorage.removeItem("hdauEn")},this.getUser=function(){if(this.hastokenAndUser()){var t=localStorage.getItem("hdauEn");return t=atob(t),JSON.parse(t)}},this.hastokenAndUser=function(){return!(!localStorage.hasOwnProperty("auth_token")||!localStorage.hasOwnProperty("hdauEn"))},this.isLoggedIn=function(){return!!localStorage.getItem("auth_token")},this.userHasPermission=function(t){if(!self.isLoggedIn())return!1;var e=self.getUser().permissions,i=!1;return angular.forEach(e,(function(e,s){if(t.indexOf(e)>=0)return console.log(e),void(i=!0)})),i};var s=["https://api.iskillmetrics.com/quiz","https://api.iskillmetrics.com/questions","https://api.iskillmetrics.com/question-section-summary","https://api.iskillmetrics.com/batches","https://api.iskillmetrics.com/roles","https://api.iskillmetrics.com/users","https://api.iskillmetrics.com/permissions","https://api.iskillmetrics.com/role-permissions","https://api.iskillmetrics.com/cats","https://api.iskillmetrics.com/media"];this.clearAllhttpCache=function(){var t=i.get("$http");for(key in s)t.remove(s[key]);return!0},this.secureProtectUI=function(){setTimeout((function(){document.addEventListener("contextmenu",t=>t.preventDefault()),$(document).keydown((function(t){return 123!=t.keyCode&&85!=t.keyCode&&(!(t.ctrlKey&&t.shiftKey&&73==t.keyCode||85==t.keyCode)&&void 0)})),$("body").bind("cut copy",(function(t){return t.preventDefault(),!1}))}))}}]);
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(r){var t,e,o,a,h,n,c,d="",C=0;for(r=Base64._utf8_encode(r);C<r.length;)a=(t=r.charCodeAt(C++))>>2,h=(3&t)<<4|(e=r.charCodeAt(C++))>>4,n=(15&e)<<2|(o=r.charCodeAt(C++))>>6,c=63&o,isNaN(e)?n=c=64:isNaN(o)&&(c=64),d=d+this._keyStr.charAt(a)+this._keyStr.charAt(h)+this._keyStr.charAt(n)+this._keyStr.charAt(c);return d},decode:function(r){var t,e,o,a,h,n,c="",d=0;for(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<r.length;)t=this._keyStr.indexOf(r.charAt(d++))<<2|(a=this._keyStr.indexOf(r.charAt(d++)))>>4,e=(15&a)<<4|(h=this._keyStr.indexOf(r.charAt(d++)))>>2,o=(3&h)<<6|(n=this._keyStr.indexOf(r.charAt(d++))),c+=String.fromCharCode(t),64!=h&&(c+=String.fromCharCode(e)),64!=n&&(c+=String.fromCharCode(o));return c=Base64._utf8_decode(c)},_utf8_encode:function(r){r=r.replace(/\r\n/g,"n");for(var t="",e=0;e<r.length;e++){var o=r.charCodeAt(e);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},_utf8_decode:function(r){for(var t="",e=0,o=c1=c2=0;e<r.length;)(o=r.charCodeAt(e))<128?(t+=String.fromCharCode(o),e++):o>191&&o<224?(c2=r.charCodeAt(e+1),t+=String.fromCharCode((31&o)<<6|63&c2),e+=2):(c2=r.charCodeAt(e+1),c3=r.charCodeAt(e+2),t+=String.fromCharCode((15&o)<<12|(63&c2)<<6|63&c3),e+=3);return t}};
angular.module("io2v3").service("langSer",[function(){this.languages=["en","ar","fr"],this.init=function(){return localStorage.hasOwnProperty("hdrLang")?localStorage.getItem("hdrLang"):(localStorage.setItem("hdrLang","en"),"en")},this.switchLang=function(){return"en"==localStorage.getItem("hdrLang")?(localStorage.setItem("hdrLang","ar"),"ar"):(localStorage.setItem("hdrLang","en"),"en")},this.langIndex=function(){if(localStorage.hasOwnProperty("hdrLang")){var a=localStorage.getItem("hdrLang");return this.languages.indexOf(a)}},this.changeLanguage=function(a){if(-1!=this.languages.indexOf(a))return localStorage.setItem("hdrLang",a),this.init()}}]);
angular.module("io2v3").service("logService",[function(){this.justLog=function(){console.log("This is a simple log message from a logger service")},this.logWithMessage=function(e){console.log("With Logger Service Your message :"+e)}}]);
angular.module("io2v3").service("masterDataService",["$http","API_URL","$cacheFactory",function(t,e,a){var r=e+"masterdatalist";this.loadMaster=function(){return t.get(r,{cache:!0})},this.getCachedItems=function(){return a.get("$http").get(r)},this.removeCache=function(){a.get("$http").remove(r)}}]);
angular.module("io2v3").service("fileUpload",["$http",function(e){this.uploadFileToUrl=function(n,o){var t=new FormData;t.append("file",n),e.post(o,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success((function(){})).error((function(){}))}}]);
angular.module("io2v3").service("quizDataService",["$http","API_URL",function(t,u){this.getMasterQuiz=function(e){return t({url:u+"quiz/subjects/"+e,method:"GET"})},this.queGlobalFetch=function(){return t({url:u+"quiz-global",method:"GET"})}}]);
angular.module("io2v3").service("quizPlay",["$http","API_URL",function(t,i){this.prepQuizQuestion=function(u,e){var n=i+"std-quiz-play/quiz_id/"+u+"/attempt_id/"+e;return t.get(n)},this.dlsPrep=function(u,e){var n=i+"std-quiz-play/dls/"+u+"/attempt_id/"+e;return t.get(n)}}]);
angular.module("io2v3").service("quizWizardService",["$http","API_URL",function(i,t){this.getPresetValues=function(e){return i({url:t+"quiz-wizard-preset",method:"GET"})},this.saveQuizWizardData=function(){},this.loadPreDistributionInfo=function(e){return i({url:t+"quizwizardsubjects",method:"POST",data:e})}}]);
angular.module("io2v3").controller("authAppCtrl",["$state","auth","$scope","API_URL","$http",function(e,t,a,o,s){vm=this,vm.auMessage="This message is delivered from authAppCtrl";var r=t.getUser().role_id;r=parseInt(r),t.isLoggedIn()&&1!==r&&3!==r&&e.go("app.logout")}]);
angular.module("io2v3").controller("baseCtrl",["$scope","auth","langSer","API_URL","$state","$http",function(e,t,s,o,a,n){var i=this;i.pageTitle="This is from base",i.branding="IO2 Version 3",e.baseUrl=o,e.langDropOPen=!1,e.masterData=null,e.lang=s.init(),e.soundObject=null,e.isPlaying=!1,e.entityLogo="assets/images/demo-logo.jpg",t.isLoggedIn()&&t.getUser().role,e.switchLang=function(){e.lang=s.switchLang()},e.langLabel=function(){return"en"==e.lang?"English":"Arabic"},e.langIndex=function(){return s.langIndex()},e.soundWavListCollection=[o+"assets/audio/notify-success.wav",o+"assets/audio/notify-error.wav",o+"assets/audio/notify-info.wav",o+"assets/audio/notify-warning.wav",o+"assets/audio/quiz-next.wav",o+"assets/audio/quiz-prev.wav",o+"assets/audio/quiz-timeout.wav",o+"assets/audio/quiz-end.wav",o+"assets/audio/modal-open.wav"],e.soundWavListCollection.forEach((function(e){})),e.$on("playSound",(function(t,s){e.message=s.message;var a=null;!0===e.isPlaying&&(e.soundObject.pause(),e.soundObject.currentTime=0),"success"===e.message?(a=o+"assets/audio/notify-success.wav",e.soundObject=new Audio,e.soundObject.src=a):"error"===e.message?(a=o+"assets/audio/notify-error.wav",e.soundObject=new Audio,e.soundObject.src=a):"warning"===e.message?(a=o+"assets/audio/notify-warning.wav",e.soundObject=new Audio,e.soundObject.src=a):"info"===e.message?(a=o+"assets/audio/notify-info.wav",e.soundObject=new Audio,e.soundObject.src=a):"modal-open"===e.message?(a=o+"assets/audio/modal-open.wav",e.soundObject=new Audio,e.soundObject.src=a):"quiz-next"===e.message?(a=o+"assets/audio/quiz-next.wav",e.soundObject=new Audio,e.soundObject.src=a):"quiz-prev"===e.message?(a=o+"assets/audio/quiz-prev.wav",e.soundObject=new Audio,e.soundObject.src=a):"quiz-timeout"===e.message?(a=o+"/assets/audio/quiz-timeout.wav",e.soundObject=new Audio,e.soundObject.src=a):"quiz-end"===e.message&&(a=o+"assets/audio/quiz-end.wav",e.soundObject=new Audio,e.soundObject.src=a),e.soundObject.play().then((function(t){e.isPlaying=!0})),e.soundObject.addEventListener("ended",t=>{e.isPlaying=!1})})),i.slugify=function(e){const t="àáäâãåăæąçćčđďèéěėëêęǵḧìíïîįłḿǹńňñòóöôœøṕŕřßśšșťțùúüûǘůűūųẃẍÿýźžż·/_,:;",s=new RegExp(t.split("").join("|"),"g");return e.toString().toLowerCase().replace(/\s+/g,"-").replace(s,e=>"aaaaaaaaacccddeeeeeeeghiiiiilmnnnnooooooprrssssttuuuuuuuuuwxyyzzz------".charAt(t.indexOf(e))).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},i.decodeUrlToken=function(e){var t=decodeURIComponent(e),s=atob(t);return JSON.parse(s)},e.gval={exams:["Exams","الامتحانات","Examens"],about:["About","حول","Sur"],terms:["Terms","شروط","termes"],privacy:["Privacy Policy","سياسة خاصة","Intimité"],details:["Details","تفاصيل","Détails"],status:["Status","الحالة","Statut"],available:["Available","متوفر","Disponible"],options:["Actions","خيارات","les options"],details:["Details","تفاصيل","détails"],addnew:["Add New","اضف جديد","addnew"],update:["Update","تحديث","Mise à jour"],save:["Save","حفظ","Enregistrer"],cancel:["Cancel","حذف","Annuler"],edit:["Edit","تصحيح","Éditer"],remove:["Remove","حذف","retirer"],delete:["Delete","حذف","Supprimer"],next:["Next","تالي","suivant"],previous:["Previous","السابق","précédent"],back:["Back","الى الخلف","retour"],profile:["Profile","الملف الشخصي","profil"],setting:["Setting","ضبط","réglage"],logout:["Logout","الخروج","Se déconnecter"],login:["Login","تسجيل الدخول","s'identifier"],register:["Register","تسجيل","S'inscrire"],hello:["hello","مرحبا","Bonjour"],dashboard:["Dashboard","لوحة القيادة","Tableau de bord"],questions:["Questions","الأسئلة","Des questions"],quizes:["Quizzes","الإختبارات","Quiz"],quiz:["Quiz","اختبار","Quiz"],stats:["Stats","احصائيات","Statistiques"],roles:["Roles","الأدوار","rôles"],users:["Users","المستخدمين","Utilisateurs"],user:["User","المستعمل","Utilisateur"],myusers:["My Users","بلدي المستخدمين","Mes-utilisateurs"],permissions:["Permissions","أذونات","Autorisations"],rolepermissions:["Role Permissions","أذونات الدور","Autorisations de rôle"],categories:["Categories","التصنيفات","catégories"],medialibraray:["Media Libraray","مكتبة الوسائط","Médiathèque"],modaltest:["Modal Test","اختبار مشروط","Test modal"],activity:["Activity","نشاط","activité"],groups:["Groups","مجموعات","groupes"],overview:["Overview","نظرة عامة","Aperçu"],progress:["Progress","تقدم","Le progrès"],weightDistribution:["Weight Distribution","توزيع الوزن","La répartition du poids"],enroll:["Enroll","يتسجل، يلتحق","Inscrire"],modifyDateTime:["Modify Date/Time","تعديل وقت","Modifier datetime"],title:["Title","عنوان","Titre"],sno:["S.NO","فهرس","Indice"],min:["Min.","الحد الأدنى","le minimum"],max:["Max.","أقصى","Le Maximum"],duration:["Duration","المدة الزمنية","Durée"],filter:["Filter","منقي","Filtre"],filterTitle:["Fitler by title","تصفية حسب العنوان","Filtrer par titre"],email:["Email","البريد الإلكتروني","Email"],name:["Name","اسم","Nom"],changePassword:["Change Password","تغيير كلمة السر","changer le mot de passe"],sendRegistrationEmail:["Send Registration Email","إرسال تسجيل البريد الإلكتروني","Envoyer un e-mail d'inscription"],upload:["Upload","رفع","Télécharger"],autoGenerate:["Auto Generate","توليد السيارات","Génération automatique"],loading:["loading data please wait...","تحميل البيانات يرجى الانتظار","Chargement des données veuillez patienter"],norecords:["No records were found","لم يتم العثور على سجلات","Aucun enregistrement n'a été trouvé"]},e.langDropToggle=function(){e.langDropOPen=!e.langDropOPen},e.changeLanguage=function(t){e.lang=s.changeLanguage(t),e.langDropToggle()},i.updateDashboardLogo=function(){t.isLoggedIn()&&"entity"==t.getUser().role&&n.get(o+"profile-authlogo").then((function(t){var s=t.data.logo;null==t.data.logo&&null==t.data.logo?e.entityLogo="assets/images/demo-logo.jpg":e.entityLogo=o+s}),(function(t){e.entityLogo="assets/images/demo-logo.jpg"}))},i.isLoggedIn=function(){return t.isLoggedIn()},e.getAuthUsername=function(){return i.authUser().name},e.isAdmin=function(){return!!t.isLoggedIn()&&1==i.authUser().role_id},i.authUser=function(){if(this.hastokenAndUser()){var e=localStorage.getItem("hdauEn");return e=atob(e),JSON.parse(e)}},i.hastokenAndUser=function(){return!(!localStorage.hasOwnProperty("auth_token")||!localStorage.hasOwnProperty("hdauEn"))},i.getIndex=function(e,t,s){for(var o=0;o<e.length;o+=1)if(e[o][t]===s)return o;return-1},e.authUser=i.authUser(),i.inboundDecode=function(e){return JSON.parse(decodeURIComponent(atob(e)))},i.outboundEncode=function(e){return encodeURIComponent(window.btoa(e))},e.getUSerRole=function(){return i.authUser().role},i.generatePassword=function(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="",s=0,o=e.length;s<8;++s)t+=e.charAt(Math.floor(Math.random()*o));return t}}]);
angular.module("io2v3").controller("batchesCtrl",["API_URL","$scope","$http","$state",function(t,a,e,n){var s=this;a.$parent.base.pageUrl=n.current.url,a.$parent.dash.pageHeading="Batches",s.revealQuizList=!1,s.loadingStatus=null,s.showProgress=!1,s.revealCandProgress=!1,s.showEnrollment=!1,s.showBatchDetails=!1,s.getEligQuiz=function(){e.get(t+"batches/elig/quiz").then((function(t){s.eligQuiz=t.data.eligQuiz,s.revealQuizList=!0}),(function(t){var e={type:"error",title:"Error While Fetching Eligible Quiz",content:t.data.message,timeout:5e3};a.$emit("notify",e),s.revealQuizList=!1}))},s.enrollProcess=function(){console.log(s.nbt.email),s.activeBatchId,e({url:t+"batches/enrollprocess/"+s.activeBatchId,method:"POST",data:{email:s.nbt.email}}).then((function(t){s.nbt.email="",null==s.enrollCanidateList?(s.enrollCanidateList=t.data.lastCandiate,s.enrollContents=!0):s.enrollCanidateList.push(t.data.lastCandiate[0]);var e={type:"success",title:"Batch Enrollment",content:t.data.message,timeout:8e3};a.$emit("notify",e)}),(function(t){var e={type:"error",title:"Failed Batch Enrollment",content:t.data.message,timeout:8e3};a.$emit("notify",e)}))},s.triggerEnroll=function(a){s.showProgress=!1,s.showEnrollment=!1,s.showBatchDetails=!1,s.revealCandProgress=!1,s.activeBatchId=a,e.get(t+"batches/tagged/canidates/"+a).then((function(t){s.showEnrollment=!0,206==t.status?s.enrollContents=!1:200==t.status&&(s.enrollContents=!0,s.enrollCanidateList=t.data.candidates)}),(function(t){}))},s.closeCandProgress=function(){s.revealCandProgress=!1,s.progressData=s.lastBatchProgress,s.showProgress=!0},s.nb={},s.batchQuizList=[],e({url:t+"batches",method:"GET",cache:!1}).then((function(t){s.dataList=t.data,s.loadingStatus=!0}),(function(t){s.loadingStatus=!1})),s.enableQuizSelect=function(){s.getEligQuiz()},s.addtoBatch=function(t){var e=a.$parent.base.getIndex(s.eligQuiz,"id",t),n=s.eligQuiz[e];s.batchQuizList.push(n),s.calcMinMax()},s.unlinkQuizFromBatch=function(t){var e=a.$parent.base.getIndex(s.batchQuizList,"id",t);s.batchQuizList.splice(e,1),s.calcMinMax()},s.hasItemAdded=function(t){return-1!=a.$parent.base.getIndex(s.batchQuizList,"id",t)},s.calcMinMax=function(){var t=0,a=0;for(var e in s.batchQuizList)s.batchQuizList.hasOwnProperty(e)&&(t+=parseInt(s.batchQuizList[e].maxScore),a+=parseInt(s.batchQuizList[e].minScore));s.nb.minScore=a,s.nb.maxScore=t},s.addBatchProcess=function(){var a={title:s.nb.title,maxScore:s.nb.maxScore,passingScore:s.nb.minScore,quizIds:function(){var t=[];for(var a in s.batchQuizList)s.batchQuizList.hasOwnProperty(a)&&t.push(s.batchQuizList[a].id);return t}()};console.log(a),e({method:"POST",url:t+"batches",data:a}).then((function(t){s.revealQuizList=!1,s.addBatch=!1,s.nb={},s.batchQuizList=[],s.nb.minScore=0,s.nb.maxScore=0,null==s.dataList?(s.loadingStatus=!0,s.dataList={},s.dataList.batches=t.data.lastBatch):s.dataList.batches.push(t.data.lastBatch[0])}),(function(t){console.log(t)}))},s.activateProgress=function(a){s.activeBatchId=a,s.addBatch=!1,e.get(t+"batches/"+a).then((function(t){s.progressData=t.data.batchProgress,s.showProgress=!0,s.showEnrollment=!1,s.showBatchDetails=!1}),(function(t){}))},s.closeProgress=function(){s.showProgress=!1,s.progressData=null,s.activeBatchId=null},s.closeEnroll=function(){s.showEnrollment=!1},s.activateCanidateProgress=function(a){s.lastBatchProgress=s.progressData,e.get(t+"batches/candidate/overview/"+s.activeBatchId+"/"+a).then((function(t){s.candProgress=t.data.batchCanidateOverview,s.candSummary=t.data.summary,s.showProgress=!1,s.showEnrollment=!1,s.showBatchDetails=!1,s.revealCandProgress=!0}),(function(t){}))},s.activateDetails=function(n){s.activeBatchId=n,e.get(t+"batch/details/"+n).then((function(t){s.batchMasterDetails=t.data,s.showProgress=!1,s.revealCandProgress=!1,s.showEnrollment=!1,s.showBatchDetails=!0,s.proceedToX=!1}),(function(t){var e={type:"error",title:"Not Found",content:t.data.message,timeout:5e3};a.$emit("notify",e),s.closeBatchDetails()}))},s.closeBatchDetails=function(){s.showBatchDetails=!1,s.proceedToX=!1}}]);
angular.module("io2v3").controller("categoriesCtrl",["API_URL","$scope","$http","$state",function(t,a,e,n){var i=this;a.$parent.base.pageUrl=n.current.url,a.$parent.dash.pageHeading="Categories",i.ncat={name:"",pcat_id:"Select Parent",catLabel:"Select Parent"},i.selectedCategory="Parent",i.newParentCategory=function(t){if(console.log(t),0!=t&&"Parent"!=t){var e=a.$parent.base.getIndex(i.dataList,"category",t);i.ncat.pcat_id=i.dataList[e].id,i.selectedCategory=i.dataList[e].category,console.log(i.ncat.pcat_id)}else i.ncat.pcat_id="root",i.selectedCategory="Parent"},i.loading=null,i.deactivateAddNew=function(){i.pageMode="list",i.ncat=null},console.log("working from categories controller");var o=t+"cats";i.fethList=function(){i.loading="loading",e({method:"GET",url:o,cache:!1}).then((function(t){i.dataList=t.data.cats,i.loading=!0}),(function(t){t.status<1&&(i.loading=!1),i.loading=!1,i.dataList=!1}))},i.addNew=function(){var n=t+"cats";parseInt(i.ncat.pcat_id)||delete i.ncat.pcat_id,e({method:"POST",url:n,data:i.ncat}).then((function(t){200==t.status&&i.dataList.push(t.data.cat[0]);var e={type:"success",title:"Operation Successfull",content:t.data.message,timeout:3e3};a.$emit("notify",e),i.ncat.name=""}),(function(t){var e={type:"error",title:"Operation Failed",content:t.data.message,timeout:3e3};a.$emit("notify",e)}))},i.edit=function(t){console.log(t);var e=a.$parent.base.getIndex(i.dataList,"id",t);i.edata=i.dataList[e],i.pageMode="edit",i.updatePcatId=function(t){if(0==t)i.edata.pcat_id=0,i.edata.parent=null;else{var e=a.$parent.base.getIndex(i.dataList,"category",t);parent_id=i.dataList[e].id,i.edata.pcat_id=parent_id}}},i.udpateCategory=function(){if(null==i.edata.parent||0==i.edata.parent)var n={name:i.edata.category,pcat_id:0};else n={name:i.edata.category,pcat_id:i.edata.pcat_id};console.log(n);var o=i.edata.id;e({url:t+"cat/"+o,method:"PUT",data:n}).then((function(t){console.log(t.data),i.pageMode="list",i.edata={};var e={type:"success",title:"Category Updated",content:t.data.message,timeout:3e3};a.$emit("notify",e);var n=t.data.cat.id,o=a.$parent.base.getIndex(i.dataList,"id",n);i.dataList[o]=t.data.cat}),(function(t){var e={type:"error",title:"Operation Failed",content:t.data.message,timeout:3e3};a.$emit("notify",e)}))},i.checkvalue=function(){console.log(typeof i.edata.pcat_id)},i.update=function(t){a.$parent.base.getIndex(i.dataList,"id",t),console.log(i.edata)},i.remove=function(n){var o=a.$parent.base.getIndex(i.dataList,"id",n);console.log(o),e({method:"DELETE",url:t+"cat/"+n}).then((function(t){i.dataList.splice(o,1);var e={type:"success",title:"Operation Successfull",content:t.data.message,timeout:3e3};a.$emit("notify",e)}),(function(t){var e={type:"error",title:"Operation Failed",content:t.data.message,timeout:3e3};a.$emit("notify",e)}))},i.fethList()}]);
angular.module("io2v3").controller("catTreeCtrl",["API_URL","$scope","$http","$state",function(t,e,a,r){var n=this;e.$parent.base.pageUrl=r.current.url;var c=t+"cat-tree";a.get(c).then((function(t){n.dataList=t.data.tree}))}]);
!function(){function a(a,o){this.name="salman ahmed",console.log("dashboard abract controller is activated"),a.pageHeading=""}angular.module("io2v3").controller("dashboardCtrl",a),a.$inject=["$scope","auth"]}();
angular.module("io2v3").controller("dashboardEntityCtrl",["API_URL","SITE_URL","$scope","$http","$state","auth","$rootScope",function(t,e,a,n,o,r,i){var l=this;a.stage=1,a.$parent.base.pageUrl=o.current.url,l.loadingStatus=null,l.hasWeekSchedule=!1,a.currentactivity=!1,l.topPerformer=!1,l.hasRecentFinished=!1,n.get(t+"dashboard").then((function(t){null!=t.data.logo&&a.$parent.base.updateDashboardLogo(),null!=t.data.actvity&&0!=t.data.actvity.length&&(a.activeCandidates=t.data.actvity,a.currentactivity=!0),null!=t.data.weekSchedule&&(l.hasWeekSchedule=!0,l.weekSchedule=t.data.weekSchedule),null==t.data.recentFinished&&0==t.data.recentFinished||(l.hasRecentFinished=!0,l.recentFinished=t.data.recentFinished),null==t.data.topPerformer&&0==t.data.topPerformer||(l.topPerformer=!0,l.topScorerList=t.data.topPerformer)}),(function(t){a.currentactivity=!1})),setTimeout((function(){null!=i.pooling&&"abort"!=i.pooling.statusText||(l.getContent(null),console.log("run when null assinged"))})),l.getContent=function(e){var n={timestamp:e||null};i.pooling=$.ajax({type:"GET",url:t+"dasboard/activity",data:n,headers:{token:localStorage.auth_token},success:function(t){t.activity?(a.currentactivity=!0,a.activeCandidates=t.activity,console.log(a.activeCandidates),$("#actIndicator").addClass("wobble").removeClass("c-blue"),setTimeout((function(){$("#actIndicator").removeClass("wobble").addClass("c-blue")}),1e3)):a.currentactivity=!1,l.getContent(t.timestamp),a.$apply()}})},l.getContent(null);var d=function(){return Math.round(100*Math.random())};window.chartColors={red:"rgb(255, 99, 132)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(75, 192, 192)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(201, 203, 207)"};var s={type:"doughnut",data:{datasets:[{data:[d(),d(),d(),d(),d()],backgroundColor:[window.chartColors.red,window.chartColors.orange,window.chartColors.yellow,window.chartColors.green,window.chartColors.blue],label:"Dataset 1"}],labels:["Terminated","Failed","In progress","Passed","High Performant"]},options:{responsive:!0,maintainAspectRatio:!0,legend:{position:"left"},title:{display:!0,text:""},animation:{animateScale:!0,animateRotate:!0}}},c=document.getElementById("myChart").getContext("2d");c.canvas.parentNode.style.height="240px",c.canvas.parentNode.style.width="420px",new Chart(c,s),l.clearActivity=function(e){n({url:t+"dashboard/markactivityinactive/"+e,method:"PUT",data:{payload:"empty"}}).then((function(t){var n={type:"success",title:"Operation Successfull",content:t.data.message,timeout:5e3};a.$emit("notify",n);var o=a.$parent.base.getIndex(a.activeCandidates,"attemptID",e);a.activeCandidates.splice(o,1),0==a.activeCandidates.length&&(a.currentactivity=!1)}),(function(t){var e={type:"error",title:"Operation Failed",content:t.data.message,timeout:5e3};a.$emit("notify",e)}))}}]);
angular.module("io2v3").controller("dashLandCtrl",["API_URL","$scope","$http","$state","auth",function(e,o,r,a,t){if(o.$parent.base.pageUrl=a.current.url,o.$parent.dash.pageHeading="Main",t.isLoggedIn()){var s=t.getUser();UserRole=s.role,"admin"==UserRole?a.go("dash.admindashboard"):"entity"==UserRole?s.profileLogo?a.go("dash.entityDashbaord"):(console.log(s),a.go("dash.profile")):"contributor"==UserRole?a.go("dash.contributorDashbaord"):"content developer"==UserRole?a.go("dash.contDevDashbaord"):"students"==UserRole||"candidate"==UserRole?a.go("std.studentDashbaord"):"proctor"!=UserRole&&"invigilator"!=UserRole||a.go("mob.activity")}o.$parent.base.pageUrl=a.current.url,this.loadingStatus=null}]);
angular.module("io2v3").controller("dashProfileCtrl",["API_URL","$scope","$http","$stateParams","$state",function(e,t,a,l,o){var i=this;i.token=localStorage.getItem("auth_token"),i.slugValidity=null,t.$parent.base.pageUrl=o.current.url,t.$parent.dash.pageHeading="Profile",i.uploadUrl=e+"profile/logo",t.dropzoneConfig={options:{url:i.uploadUrl,multiple:!1,maxFiles:1,thumbnailWidth:null,thumbnailHeight:null,acceptedFiles:".pdf,.png,.jpg,.gif,.bmp,.jpeg",dictDefaultMessage:"Drag or upload logo image here",headers:{token:i.token}},eventHandlers:{sending:function(e,t,a){console.log(t)},success:function(e,t){console.log("file is sent")}}},i.loadingStatus=null,i.profileData=!1,i.slugify=function(e){const t="àáäâãåăæąçćčđďèéěėëêęǵḧìíïîįłḿǹńňñòóöôœøṕŕřßśšșťțùúüûǘůűūųẃẍÿýźžż·/_,:;",a=new RegExp(t.split("").join("|"),"g");return e.toString().toLowerCase().replace(/\s+/g,"-").replace(a,e=>"aaaaaaaaacccddeeeeeeeghiiiiilmnnnnooooooprrssssttuuuuuuuuuwxyyzzz------".charAt(t.indexOf(e))).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},i.sayHello=function(e){slug=i.slugify(e),i.profileData.slug=slug,i.slugAvailable(slug)},i.getProfile=function(){var t=e+"profile";a.get(t).then((function(t){1==t.data.status?(i.loadingStatus=!0,i.profileData=t.data.profile[0],i.logoUrl=e+i.profileData.logo):i.loadingStatus=!1}),(function(e){i.loadingStatus=!1}))},i.getProfile(),i.saveProfile=function(){a({url:e+"profile",method:"POST",data:i.profileData}).then((function(e){}),(function(e){}))},i.updateProfile=function(){a({url:e+"profile",method:"PUT",data:i.profileData}).then((function(e){}),(function(e){}))},i.slugAvailable=function(a){var l=e+"profile/slugavailable";$.ajax({url:l,method:"POST",data:{slug:a}}).then((function(e,t,a){i.slugValidity=!0}),(function(e,a,l){if(406==e.status){i.slugValidity=!1,i.slugValidity=!1;var o={type:"error",title:"Critical Error",content:e.responseJSON.message,timeout:3e3};t.$emit("notify",o)}}))}}]);
angular.module("io2v3").controller("dashQuizzesCtrl",["API_URL","$scope","$http","$state",function(e,t,a,i){var o=this;t.sortType="$",o.searchQuery="",t.sortReverse=!1,o.selectSortfield=function(e){t.sortType=e},o.clearFilters=function(){t.sortType="$",o.searchQuery="",t.sortReverse=!1},o.toggleSort=function(){t.sortReverse=!t.sortReverse},o.loadingStatus=null,t.$parent.base.pageUrl=i.current.url,t.$parent.dash.pageHeading="Quizzes",o.updateDateTimeModal=!1,o.deleteConfirmModal=!1,o.fetchQuiz=function(){a({url:e+"quiz",method:"GET",cache:!1}).then((function(e){o.dataList=e.data.quiz,o.loadingStatus=!0}),(function(e){o.dataList=e.data.quiz,o.loadingStatus=!1}))},o.fetchQuiz(),o.toggleEnroll=function(i,n){console.log("fired");var d=e+"quiz-enrollment-toggle/"+i,l=t.$parent.base.getIndex(o.dataList,"id",i),s=o.dataList[l];a({url:d,method:"PUT",data:{enrollment:n}}).then((function(e){console.log(e);var a={type:"success",title:"Enrollment",content:e.data.message,timeout:5e3};t.$emit("notify",a)}),(function(e){var a={type:"error",title:"Enrollment",content:e.data.message,timeout:5e3};t.$emit("notify",a),s.enrollment=!e.data.value}))},o.statusToggle=function(i,n){var d=e+"quiz-status-toggle/"+i,l=t.$parent.base.getIndex(o.dataList,"id",i);o.dataList[l],a({url:d,method:"PUT",data:{status:n}}).then((function(e){var a=1==e.data.qstatus?"success":"warning";console.log("type"+e.data.qstatus);var i={type:a,title:"Status",content:e.data.message,timeout:5e3};t.$emit("notify",i)}),(function(e){}))},o.launchDateTimeModal=function(e){var a=t.$parent.base.getIndex(o.dataList,"id",e);o.dateTimeModalData=o.dataList[a],o.updateDateTimeModal=!0},o.closeDateTimeModal=function(){o.dateTimeModalData=null,o.updateDateTimeModal=!1},o.udpateQuizdateTime=function(){var i=o.dateTimeModalData.id,n=document.getElementById("adate"+o.dateTimeModalData.id).value,d=document.getElementById("edate"+o.dateTimeModalData.id).value,l=o.checkDates(n,d);if(1==l.status)console.log("procceed"),a({url:e+"quiz-update-datetime/"+i,method:"PUT",data:{startDateTime:n,endDateTime:d}}).then((function(e){o.dateTimeModalData.startDateTime=n,o.dateTimeModalData.endDateTime=d,o.closeDateTimeModal();var a={type:"success",title:"Operation Successful",content:e.data.message,timeout:5e3};t.$emit("notify",a)}),(function(e){var a={type:"error",title:"Operation Failed",content:e.data.message,timeout:5e3};t.$emit("notify",a)}));else{var s={type:"error",title:"Invalid Date Range",content:l.error,timeout:5e3};t.$emit("notify",s)}},o.checkDates=function(e,t){return(new Date).toJSON().slice(0,19).replace("T"," "),o.dateVerified=null,o.datesError=null,t<=e?{status:!1,error:"End datetime must be greater than start datetime"}:{status:!0,error:null}},o.launchDeleteConfirmation=function(e){var a=t.$parent.base.getIndex(o.dataList,"id",e);o.deleteModalItem=o.dataList[a],o.deleteConfirmModal=!0,console.log(e)},o.dissmissDeleteModal=function(){o.deleteModalItem.proceedToX=!1,o.deleteModalItem=null,o.deleteConfirmModal=!1},o.removeQuiz=function(){var i=o.deleteModalItem.id,n=t.$parent.base.getIndex(o.dataList,"id",i),d=o.deleteModalItem.title;a.delete(e+"quiz/"+i).then((function(e){o.dissmissDeleteModal(),o.dataList.splice(n,1);var a={type:"success",title:"Operation Successful",content:d+" "+e.data.message,timeout:5e3};t.$emit("notify",a)}),(function(e){var a={type:"error",title:"Operation Failed",content:e.data.message,timeout:5e3};t.$emit("notify",a),o.dissmissDeleteModal()}))}}]);
angular.module("io2v3").controller("enrollCtrl",["API_URL","$scope","$http","$stateParams",function(t,e,a,n){var i=this;i.examID=n.examID,e.$parent.absExamId=i.examID;var o=t+"enroll/"+i.examID;e.$parent.exAbs.pageHeading="Enrollment",i.interceptModal=!1,i.nenroll={},i.dataList,i.sendInvitation=function(n){console.log(n);var o=t+"sendinvitation/"+n,r=e.$parent.base.getIndex(i.dataList,"id",n);i.dataList[r].invited=1,a({url:o,method:"POST",data:{}}).then((function(t){var a={type:"info",title:"Invitation",content:t.data.message,timeout:3e3};e.$emit("notify",a)}),(function(t){var a={type:"error",title:"Invitation Failed",content:t.data.message,timeout:3e3};e.$emit("notify",a)}))},a.get(o).then((function(t){1==t.data.status&&(i.dataList=t.data.enroll)}),(function(t){console.log(t),i.dataList=!1})),i.quizEnroll=function(){var n=t+"enroll";i.nenroll.quiz_id=i.examID,a({url:n,method:"POST",data:i.nenroll}).then((function(t){null==i.dataList||0==i.dataList?i.dataList=t.data.lastEnroll:i.dataList.push(t.data.lastEnroll[0]),i.nenroll={}}),(function(t){var a={type:"error",title:"Enrollment Error",content:t.data.message,timeout:3e3};e.$emit("notify",a)}))},i.toggleRetake=function(n){var o=parseInt(e.$parent.base.getIndex(i.dataList,"id",n)),r=i.dataList[o].retake;a({url:t+"enroll/retake/"+n,method:"PUT",data:{retake:r}}).then((function(t){var a={type:1==t.data.value?"success":"warning",title:"Operation Successfull",content:t.data.message,timeout:3e3};e.$emit("notify",a)}),(function(t){i.dataList[o].retake=1==i.dataList[o].retake?"0":"1";var a={type:"error",title:"Operation Failed",content:t.data.message,timeout:3e3};e.$emit("notify",a)}))},i.updateScheduleDateTime=function(n,o,r){parseInt(e.$parent.base.getIndex(i.dataList,"id",n));var l=document.getElementById("adate"+n).value;a({url:t+"enroll/schedule-datetime/"+n+"/"+o,method:"PUT",data:{dtsScheduled:l}}).then((function(t){var a={type:"success",title:"Reschedule Success",content:t.data.message,timeout:5e3};e.$emit("notify",a)}),(function(t){var a={type:"error",title:"Reschedule Failed",content:t.data.message,timeout:5e3};e.$emit("notify",a)}))},i.removeEnroll=function(n){a.delete(t+"enroll/"+n).then((function(t){var a={type:"success",title:"Operation Successfull",content:t.data.message,timeout:5e3};e.$emit("notify",a);var o=e.$parent.base.getIndex(i.dataList,"id",n);i.dataList.splice(o,1)}),(function(t){var a={type:"error",title:"Operation Failed",content:t.data.message,timeout:5e3};e.$emit("notify",a)}))},i.resetEnroll=function(n){a({url:t+"enroll-reset/"+n,method:"PUT",data:{payload:"empty"}}).then((function(t){var a={type:"success",title:"Operation Successfull",content:t.data.message,timeout:5e3};e.$emit("notify",a)}),(function(t){var a={type:"error",title:"Operation Failed",content:t.data.message,timeout:5e3};e.$emit("notify",a)}))},i.activateIntercept=function(t){var a=e.$parent.base.getIndex(i.dataList,"id",t);i.interceptItem=i.dataList[a],i.interceptModal=!0},i.deactivateintercept=function(){i.interceptItem=null,i.interceptModal=!1},i.udpateIntercept=function(n){i.updatePayload={intercept:i.interceptItem.intercept,direction:i.interceptItem.direction,lastLimit:i.interceptItem.lastLimit},a({url:t+"intercept/"+n+"/"+i.interceptItem.quiz_id,method:"PUT",data:i.updatePayload}).then((function(t){var a={type:"info",title:"Operation Successfull",content:t.data.message,timeout:3e3};e.$emit("notify",a),i.deactivateintercept()}),(function(t){var a={type:"error",title:"Operation Failed",content:t.data.message,timeout:3e3};e.$emit("notify",a)}))}}]);
angular.module("io2v3").controller("examMgmtAbstractCtrl",["API_URL","$scope","$http","$stateParams",function(a,t,e,o){t.absExamId=null,t.masterQuizData=null,t.pageHeading="",console.log("exam abstract is activated"),t.$parent.base.updateDashboardLogo()}]);
angular.module("io2v3").controller("examOverviewCtrl",["API_URL","$scope","$http","$stateParams","quizDataService",function(e,t,o,n,a){var i=this;i.examID=n.examID,t.$parent.absExamId=n.examID,t.$parent.exAbs.pageHeading="Overview Details",i.loadProgress=null,a.getMasterQuiz(i.examID).then((function(e){console.log(e),i.Quiz=e.data.quiz[0],i.Distro=e.data.quizBaseDistro}),(function(e){console.log(e),i.loadProgress=!1})),i.toggleEnroll=function(n,a){console.log("fired"),o({url:e+"quiz-enrollment-toggle/"+n,method:"PUT",data:{enrollment:a}}).then((function(e){var o={type:"success",title:"Enrollment",content:e.data.message,timeout:5e3};t.$emit("notify",o)}),(function(e){var o={type:"error",title:"Enrollment",content:e.data.message,timeout:5e3};t.$emit("notify",o),i.Quiz.enrollment=!e.data.value}))},i.optionsToggle=function(n,a,l){o({url:e+"quiz-option-toggle/"+a,method:"PUT",data:{typeKey:n,statusValue:l}}).then((function(e){}),(function(e){if("dls"==n){i.Quiz.dls=0;var o={type:"error",title:"DLS OPeration failed",content:e.data.message,timeout:5e3};t.$emit("notify",o)}}))}}]);
angular.module("io2v3").controller("examRefreshedCtrl",["API_URL","$scope","$http","$stateParams",function(e,o,t,n){this.countdown=0,setTimeout((function(e){window.close()}),3e3)}]);
angular.module("io2v3").controller("forgetCtrl",["API_URL","$scope","$http","$stateParams","$state",function(t,e,o,a,i){var n=this;console.log("forget ctrl is actvitated"),n.sendRecover=function(){o({url:t+"residue",method:"POST",data:{email:n.email}}).then((function(t){var o={type:"info",title:"Successful",content:t.data.message,timeout:3e3};e.$emit("notify",o)}),(function(t){var o={type:"error",title:"Operation Failed",content:t.data.message,timeout:3e3};e.$emit("notify",o)}))}}]);
angular.module("io2v3").controller("homeCtrl",["$state",function(o){}]);
angular.module("io2v3").controller("invitedAbstractCtrl",["API_URL","$scope","$http","$stateParams","$state",function(t,s,a,i,e){console.log("invited abstract is activated"),this.message="hello world",this.pageHeading="Invitation",this.brandLogo="assets/images/iSkillMetrics-logo.svg"}]);
angular.module("io2v3").controller("invitedbyentityCtrl",["API_URL","SITE_URL","$scope","$http","$stateParams","$state","$rootScope",function(t,e,i,a,n,o,s){var l=this;l.quizModal=!1,l.hasQuizEnrolled=null,l.hasPendingQuiz=!1,l.hasAttemptedQuiz=!1,l.isInitiatStart=!1,l.entityProfileStatus=null,l.decodedUriObj=!1,l.interceptRedirect=!1,localStorage.removeItem("lastStoredDurationSeconds"),null!=n.entityslug&&""!=n.entityslug&&null!=n.invitetoken||(l.interceptRedirect=!0),l.entityslug=n.entityslug;var r=n.invitetoken,u=i.$parent.base.decodeUrlToken(r);"object"==typeof u?l.decodedUriObj=u:l.interceptRedirect=!0,console.log(u),l.fetchEntityProfile=function(){var e=t+"profile/entity-by-slug/"+l.entityslug;a.get(e).then((function(e){l.entityProfileStatus=!0,l.profileData=e.data.profile[0];var a=l.profileData.logo,n=t+"/"+a;i.$parent.vm.brandLogo=n})).then((function(t){l.entityProfileStatus=!1}))},l.fetchEntityProfile(),l.getInvitedQuizList=function(){successFetchQuizList=function(t){0!=t.data.quiz&&(l.hasQuizEnrolled=!0,l.hasPendingQuiz=!0),0!=t.data.attempted&&(l.hasAttemptedQuiz=!0,l.hasQuizEnrolled=!0),0==t.data.quiz&&0==t.data.attempted&&(l.hasQuizEnrolled=!1),l.dataList=t.data},errorFetchQuizList=function(t){0==t.data.quiz&&0==t.data.attempted&&(l.hasQuizEnrolled=!1)};var e=l.decodedUriObj.enroll_id;a.get(t+"invitation-quizzes/"+e).then(successFetchQuizList,errorFetchQuizList)},l.getInvitedQuizList(),l.initiateQuiz=function(n){l.isInitiatStart=!0,a({url:t+"std-quiz-initiate",method:"POST",data:{enroll_id:n}}).then((function(t){var a=t.data;if(0!=a.usedXTimes){l.quizModal=!1;var n={type:"error",title:"Error",content:a.warning_message,timeout:8e3};return i.$emit("notify",n),!1}if("static"==a.type){s=t.data.attempt_id,l.actQuiz.id;var o=e+"quiz-assement/"+s+"/"+l.actQuiz.id;l.quizModal=!1,l.isInitiatStart=!1,l.actQuiz.validity="progress",window.open(o,"Quiz","toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=0,fullscreen=yes,width="+screen.availWidth+",height="+screen.availHeight)}else if("dls"==a.type){var s;s=t.data.attempt_id,l.actQuiz.id,dlsPopupUrl=e+"/quiz-assessment/dls/"+s+"/"+l.actQuiz.id,l.quizModal=!1,l.isInitiatStart=!1,l.actQuiz.validity="progress",window.open(dlsPopupUrl,"Quiz","toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=0,fullscreen=yes,width="+screen.availWidth+",height="+screen.availHeight)}else console.log("quiz type is unknown")}),(function(t){console.log(t)}))},l.launchQuizModal=function(t,e=!1){if(e)a=i.$parent.base.getIndex(l.dataList.attempted,"id",t),l.actQuiz=l.dataList.attempted[a];else{var a=i.$parent.base.getIndex(l.dataList.quiz,"id",t);l.actQuiz=l.dataList.quiz[a]}l.quizModal=!0},l.showCountdown=function(t,e,a){new Date(e).getTime();var n=new Date(a).getTime(),o=(new Date).getTime();if(n>o){console.log("work for countdown");var s=$interval((function(){var e=(new Date).getTime(),a=n-e,o=Math.floor(a/864e5),r=Math.floor(a%864e5/36e5),u=Math.floor(a%36e5/6e4),d=Math.floor(a%6e4/1e3);if(a<=0){$interval.cancel(s);var c=i.$parent.base.getIndex(l.dataList.quiz,"id",t);l.dataList.quiz[c].schedule="eligible"}i.counter[t]=0==o&&0==r?u+" mins "+d+" secs ":o+" DD "+r+" HH "+u+" mm "+d+" ss ",console.log(a)}),1e3)}},l.updateOnFinish=function(e){var a={timestamp:e||null};s.studenExamListPooling=$.ajax({type:"GET",url:t+"std-quiz-polling",data:a,headers:{token:localStorage.auth_token},success:function(t){t.timestamp>0&&(l.poolCounter+=1),l.poolCounter>1&&(l.getInvitedQuizList(),console.log(t)),i.$apply(),l.updateOnFinish(t.timestamp)}})},l.updateOnFinish(null)}]);
angular.module("io2v3").controller("libraryCtrl",["API_URL","$scope","$http","$stateParams","$state",function(t,a,e,o,n){var r=this;r.loadingStatus=null,a.$parent.base.pageUrl=n.current.url,a.$parent.dash.pageHeading="Media Libraray",a.apiUrl=t,r.myFormData={category_id:"Select Category"},r.sendFile=function(){var o=a.photo,n=t+"media",i=new FormData;angular.forEach(o,(function(t){i.append("file",t)}));var c=r.myFormData;for(var s in c)i.append(s,c[s]);e.post(n,i,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then((function(t){console.log(t);var a=t.data.lastItem[0];r.dataList.push(a)}),(function(t){var e={type:"error",title:"Error",content:t.data.message,timeout:3e3};a.$emit("notify",e)}))},r.fetchMediaList=function(){e.get(t+"media",{cache:!1}).then((function(t){r.loadingStatus=!0,r.dataList=t.data.media}),(function(t){r.loadingStatus=!1}))},r.fetchCategoryFlatRoot=function(){e.get(t+"category-flat-root",{cache:!0}).then((function(t){r.loadingStatus=!0,r.categoryList=t.data.categories}),(function(t){r.loadingStatus=!1}))},r.fetchMediaList(),r.fetchCategoryFlatRoot()}]);
angular.module("io2v3").controller("loginCtrl",["$state","auth","API_URL","$scope","$stateParams",function(t,e,n,o,a){e.clearAllhttpCache();var i=this;if(i.loginStatus=null,i.wrongCreds=null,i.actionTokenObj=null,i.interceptDefaultRedirect=!1,null!=a.actiontoken){var r=o.$parent.base.decodeUrlToken(a.actiontoken);"object"==typeof r&&(i.actionTokenObj=r,i.interceptDefaultRedirect=!0)}i.handleRedirect=function(){if(e.isLoggedIn()&&e.getUser().role,!localStorage.getItem("auth_token"))return!1;i.interceptDefaultRedirect&&"quizInvitation"==i.actionTokenObj.action?t.go("inv.invited",{entityslug:i.actionTokenObj.entitySlug,invitetoken:a.actiontoken}):t.go("dash.land")},i.handleRedirect(),i.login=function(){e.login(i.creds).then(l,c)};var l=function(t){i.loginStatus=!0,i.wrongCreds=!1;var n=null;if(null!=t.data.token){n=t.data.token,localStorage.setItem("auth_token",n);var o=t.data.user,a=JSON.stringify(o);a=btoa(a),localStorage.setItem("hdauEn",a),e.getUser(),i.handleRedirect()}e.getUser()},c=function(t){i.loginStatus=!1,i.wrongCreds=!0;var e={type:"error",title:"Error Heading",content:t.data.message,timeout:3e3};o.$emit("notify",e)}}]);
angular.module("io2v3").controller("logoutCtrl",["$state","$timeout","auth",function(o,t,e,a){localStorage.removeItem("auth_token"),localStorage.removeItem("hdauEn"),o.go("ua.login")}]);
angular.module("io2v3").controller("messageCtrl",["API_URL","$scope","$http","$stateParams",function(e,a,t,s){var n=this;const o=new BroadcastChannel("sw-idxsaved");n.message={},console.log(s),n.loadMaster=function(){t.get(e+"masterdatalist").then((function(e){}),(function(e){}))},n.handleMessagePost=function(){n.idbPayload={url:"https://api.iskillmetrics.com/message",method:"POST",data:n.message},n.triggerBackgroundSync=function(){var e={form_data:n.idbPayload};navigator.serviceWorker.controller.postMessage(e),o.addEventListener("message",e=>{1==e.data.status&&null!=window.cachedRegisterSW&&window.cachedRegisterSW.sync.register("exam")})},t(n.idbPayload).then((function(e){}),(function(e){e.status<1&&n.triggerBackgroundSync()}))}}]);
angular.module("io2v3").controller("mobileAbstractCtrl",["API_URL","$scope","$http","$stateParams",function(e,t,l,i){var o=this;console.log("mobileAbstractCtrl activated"),o.slideMenuActive=!1,o.toggleSlideMenu=function(){o.slideMenuActive=!o.slideMenuActive}}]);
angular.module("io2v3").controller("mobileActivityCtrl",["API_URL","$scope","$http","$stateParams","$rootScope",function(t,e,o,a,n){var i=this;e.currentactivity=!1,console.log("mobile activity"),setTimeout((function(){null!=n.pooling&&"abort"!=n.pooling.statusText||(i.getContent(null),console.log("run when null assinged"))})),i.getContent=function(o){var a={timestamp:o||null};n.pooling=$.ajax({type:"GET",url:t+"dasboard/activity",data:a,headers:{token:localStorage.auth_token},success:function(t){t.activity?(e.currentactivity=!0,e.activeCandidates=t.activity,console.log(e.activeCandidates),$("#actIndicator").addClass("wobble").removeClass("c-blue"),setTimeout((function(){$("#actIndicator").removeClass("wobble").addClass("c-blue")}),1e3)):e.currentactivity=!1,i.getContent(t.timestamp),e.$apply()}})},i.getContent(null)}]);
!function(){function e(e,t,a,o){var n=this;n.modalOpen=!1,t.$parent.base.pageUrl=e.current.url,n.triggetEmit=function(e){t.$emit("playSound",{message:e})},n.dataList=[{id:"1",email:"sa@isystematic.com"},{id:"2",email:"nk@isystematic.com"},{id:"3",email:"ak@isystematic.com"},{id:"4",email:"ua@isystematic.com"}],n.launchModal=function(e){n.modalId=e,n.modalOpen=!0,n.modalData=n.dataList[e],console.log(n.modalData)},a.get(o+"test-enc-data").then((function(e){console.log(e.data.users),n.encodedMessage=e.data.users,n.decodedMessage=t.$parent.base.inboundDecode(n.encodedMessage),console.log(n.decodedMessage)}),(function(e){})),n.convertDates=function(e){var t=new Date(e);t.getTimezoneOffset();return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.getFullYear()+"-"+(t.getMonth()<=9?"0"+t.getMonth():t.getMonth())+"-"+(t.getDate()<=9?"0"+t.getDate():t.getDate())+" "+(t.getHours()<=9?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<=9?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<=9?"0"+t.getSeconds():t.getSeconds())}}angular.module("io2v3").controller("modalCtrl",e),e.$inject=["$state","$scope","$http","API_URL"]}();
angular.module("io2v3").controller("myusersCtrl",["API_URL","$scope","$http","$state","auth",function(e,t,a,s,o){var n=this;t.sortType="$",n.searchQuery="",t.sortReverse=!1,n.dualColumn=!1,n.autoGeneratedStatus=!1,n.roleLabel=function(e){return"students"==e?"Candidate":"contributor"==e?"Test Developer":e},n.selectSortfield=function(e){t.sortType=e},n.clearFilters=function(){t.sortType="$",n.searchQuery="",t.sortReverse=!1},t.$parent.base.pageUrl=s.current.url,t.$parent.dash.pageHeading="Users",n.loadingStatus=null,n.forceCategoryBound=!1,n.modalOpen=!1,n.modalData,n.permssionModal=!1,n.deleteConfirmModal=!1,n.xUSer=null,n.nUser={},n.addUser=!1,n.userRole=o.getUser().role,n.changePassword=!1,n.userBindCheck=function(){console.log();var e=t.$parent.base.getIndex(n.roles,"id",n.nUser.role_id),a=n.roles[e].role;n.forceCategoryBound="contributor"==a||"content developer"==a},n.generateFromRandom=function(){n.generatedPassword=t.$parent.base.generatePassword(),n.nUser.password=n.generatedPassword,n.nUser.passwordConfirm=n.generatedPassword},n.activateAddUser=function(){n.generatedPassword="",n.nUser="",n.addUser=!0,n.dualColumn=!0},n.deactivateAddUser=function(){n.generatedPassword="",n.nUser="",n.addUser=!1,n.dualColumn=!1},n.addNewUser=function(){a({url:e+"users",method:"POST",data:n.nUser}).then((function(e){var a={type:"success",title:"Operation Successfull",content:e.data.message,timeout:3e3};t.$emit("notify",a),n.addUser=!1,n.nUser={},null!=n.dataList?(n.dataList.push(e.data.lastCreatedUser[0]),console.log("with existing list")):(console.log("on empty user list"),n.dataList=e.data.lastCreatedUser,n.loadingStatus=!0)}),(function(e){var a={type:"error",title:"User Creations Failed",content:e.data.message,timeout:3e3};t.$emit("notify",a)}))},n.launchDeleteConfirmation=function(e){n.deleteConfirmModal=!0;var a=t.$parent.base.getIndex(n.dataList,"id",e);n.xUSer=n.dataList[a]},n.closeDeleteModal=function(){n.deleteConfirmModal=!1,n.xUSer=null},n.loadPermissions=function(s){var o=t.$parent.base.getIndex(n.dataList,"id",s);n.modalData=n.dataList[o],a({method:"GET",url:e+"user-permissions/"+s}).then((function(e){n.userPermissions=e.data.userPermissions,n.permssionModal=!0,0==e.data.customPermissionList?n.newCustomPermission=!1:(n.newCustomPermission=!0,n.customPermissionList=e.data.customPermissionList),console.log(e.data)}),(function(e){var a={type:"error",title:"User Permissions",content:e.data.message,timeout:3e3};t.$emit("notify",a)}))},n.launchModal=function(e){var a=t.$parent.base.getIndex(n.dataList,"id",e);n.modalData=n.dataList[a],n.modalOpen=!0,console.log(n.modalData)},n.cpGenerateFromRandom=function(){n.cpGenerated=t.$parent.base.generatePassword(),n.modalData.password=n.cpGenerated,n.modalData.cpassword=n.cpGenerated},n.deactivateChangePassword=function(){n.modalOpen=!1,n.modalData.password="",n.modalData.cpassword="",n.modalData=null,n.cpGenerated=!1},n.udpatePassword=function(){var s=e+"changepassword/"+n.modalData.id,o={password:n.modalData.password};n.modalData.password==n.modalData.cpassword?a({url:s,method:"PUT",data:o}).then((function(e){var a={type:"success",title:"Operation Successfull",content:e.data.message,timeout:3e3};t.$emit("notify",a),n.deactivateChangePassword()}),(function(e){console.log("failed while updating password")})):t.$emit("notify",{type:"error",title:"Validation Error",content:"Both Password must be same",timeout:3e3})},a({method:"GET",url:e+"my-users",cache:!1}).then((function(e){n.topCategories=e.data.topCategories,n.roles=e.data.roles,200==e.status?(n.dataList=e.data.users,n.loadingStatus=!0):206==e.status&&(n.loadingStatus="no contents")}),(function(e){n.loadingStatus=!1})),n.statustoggle=function(s,o){var r=t.$parent.base.getIndex(n.dataList,"id",s);a({method:"PUT",url:e+"users/status-toggle/"+s,data:{status:o}}).then((function(e){if(1==e.data.user[0].status){var a={type:"success",title:"Operation Successfull",content:e.data.message,timeout:3e3};t.$emit("notify",a)}else a={type:"warning",title:"Operation Successfull",content:e.data.message,timeout:3e3},t.$emit("notify",a)}),(function(e){var a={type:"error",title:"Operation Failed",content:e.data.message,timeout:3e3};t.$emit("notify",a),n.dataList[r].status=1==o?"0":"1"}))},n.resetUserPermissions=function(s,o){a({url:e+"users-permissons/reset/"+s+"/"+o,method:"PUT",data:{}}).then((function(e){var a={type:"success",title:"User Permissions",content:e.data.message,timeout:3e3};t.$emit("notify",a)}),(function(e){var a={type:"error",title:"User Permission",content:e.data.message,timeout:3e3};t.$emit("notify",a)}))},n.addNewUserPermission=function(s){if(isNaN(n.nctp))return t.$emit("notify",{type:"error",title:"Validation",content:"Missing Permission ID",timeout:3e3}),!1;a({url:e+"user-permissions",method:"POST",data:{user_id:s,permission_id:n.nctp}}).then((function(e){var a={type:"success",title:"User Permissions",content:e.data.message,timeout:3e3};t.$emit("notify",a),n.userPermissions.push(e.data.lastAdded[0])}),(function(e){var a={type:"error",title:"User Permissions",content:e.data.message,timeout:3e3};t.$emit("notify",a)}))},n.privatePermissionToggle=function(s,o,n){a({url:e+"users-permissons/status-toggle/"+o+"/"+s,method:"PUT",data:{pStatus:n}}).then((function(e){var a={type:0==e.data.permissionStatus?"warning":"success",title:"User Permissions",content:e.data.message,timeout:3e3};t.$emit("notify",a)}),(function(e){var a={type:"error",title:"User Permission",content:e.data.message,timeout:3e3};t.$emit("notify",a)}))},n.deleteUser=function(s){a({url:e+"users/"+s,method:"DELETE",data:{}}).then((function(e){var a=t.$parent.base.getIndex(n.dataList,"id",s);n.dataList[a].proceedToX=!1,n.deleteConfirmModal=!1,n.xUSer.proceedToX=!1,n.dataList.splice(a,1);var o={type:"warning",title:"OPeration Successfull",content:e.data.message,timeout:3e3};t.$emit("notify",o)}),(function(e){var a={type:"error",title:"OPeration Failed",content:e.data.message,timeout:3e3};t.$emit("notify",a)}))},n.activateUserUpload=function(){n.uploadUser=!0,n.dualColumn=!0},n.deactivateUserUpload=function(){n.uploadUser=!1,n.dualColumn=!1,n.uploadSuccessFull=!1,n.uploadedUsersList=void 0},n.processUserUPload=function(){var s=t.photo;if(null==s)return t.$emit("notify",{type:"error",title:"Validation Error",content:"Please attach CSV file",timeout:3e3}),!1;var o=new FormData;angular.forEach(s,(function(e){o.append("file",e)}));var r=e+"my-users/upload";n.uploadSuccessFull=!1,a.post(r,o,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then((function(e){null!=e.data.info&&0!=e.data.info.length&&(n.uploadSuccessFull=!0,n.uploadedUsersList=e.data.info),null!=e.data.addedUsers&&0!=e.data.addedUsers.length&&(n.newGernatedUsers=e.data.addedUsers,angular.forEach(n.newGernatedUsers,(function(e,t){n.dataList.push(e)})));var a={type:"success",title:"Upload Successfull",content:e.data.message,timeout:3e3};t.$emit("notify",a)}),(function(e){var a={type:"error",title:"Upload Error",content:e.data.message,timeout:3e3};t.$emit("notify",a)}))},n.userAutoGenerate=function(){a({url:e+"users-autogenerate",method:"POST",data:{}}).then((function(e){n.autoGeneratedStatus=!0,n.addUser=!1,n.generatedUsersList=e.data.infoPayload,null!=e.data.addedUsers&&0!=e.data.addedUsers.length&&(n.newGernatedUsers=e.data.addedUsers,angular.forEach(n.newGernatedUsers,(function(e,t){n.dataList.push(e)})));var a={type:"success",title:"Upload Successfull",content:e.data.message,timeout:3e3};t.$emit("notify",a)}),(function(e){var a={type:"error",title:"Operation Failed",content:e.data.message,timeout:3e3};t.$emit("notify",a)}))},n.deactivateInfoGenerated=function(){n.autoGeneratedStatus=!1,n.uploadUser=!1,n.dualColumn=!1,n.uploadSuccessFull=!1,n.uploadedUsersList=void 0,n.generatedUsersList=void 0}}]);
angular.module("io2v3").controller("newQuizWizardCtrl",["API_URL","$scope","$http","$state","$stateParams","wizardPreset","quizWizardService",function(e,t,a,n,o,i,s){var r=this;t.$parent.base.pageUrl=n.current.url,t.$parent.dash.pageHeading="Add New Quiz",r.parentId=null,r.subCategory=null,r.subjectIds=[],t.stage,r.PresetData=i.data,r.categories=r.PresetData.categories,r.poolSummary=r.PresetData.pool,r.nQuiz={},r.nQuiz.reTakeUnique=0,r.nQuiz.dls=0,r.nQuiz.scoreVisible=0,r.nQuiz.showGradings=0,r.nQuiz.showGPA=0,r.chosenSubjects=[],r.allDone=!1,r.hasValidDistribution=!1,r.phaseOneStatus="inactive",r.phaseTwoStatus="inactive",r.phaseThreeStatus="inactive",r.phaseFourStatus="inactive",r.navigateToLastCreated=function(){n.go("exm.exam",{examID:r.lastCreatedId})},r.calcMaxAllocation=function(e){r.maxAllocated=parseInt(r.nQuiz.noQues)*parseInt(e)},r.saveQuiz=function(n){r.hasValidDistribution=1==n,r.moveToStep(6),r.phaseOneStatus="working";var o={title:r.nQuiz.title,category_id:r.parentId,cleanDesp:[r.subCategory],cleanSubDesp:r.subjectIds,duration:r.nQuiz.duration,maxScore:r.nQuiz.maxScore,minScore:r.nQuiz.minScore,startDateTime:r.nQuiz.startDateTime,endDateTime:r.nQuiz.endDateTime,noques:r.nQuiz.noQues,code:r.nQuiz.code,venue:r.nQuiz.venue,threshold:r.nQuiz.threshold,dls:r.nQuiz.dls,uniqueOnRetake:r.nQuiz.reTakeUnique,showScore:r.nQuiz.scoreVisible,showResult:r.nQuiz.showResults,showGrading:r.nQuiz.showGradings,showGPA:r.nQuiz.showGPA,maxAllocation:r.nQuiz.maxAllocation};r.phaseOneStatus="done",r.phaseTwoStatus="working",console.log(o),a({url:e+"quiz/wizard",method:"POST",data:o}).then((function(e){r.phaseTwoStatus="done";var a={type:"success",title:"Operation Successful",content:e.data.message,timeout:5e3};t.$emit("notify",a);var n=e.data.last_id;r.lastCreatedId=n,r.hasValidDistribution?(r.phaseFourStatus="working",r.saveDistribution(n)):r.allDone=!0}),(function(e){r.phaseTwoStatus="error";var a={type:"error",title:"Save Operation Failed",content:e.data.message,timeout:8e3};t.$emit("notify",a)}))},r.checkDates=function(){var e=new Date;e.setMilliseconds(0),e.setSeconds(0);var t=document.getElementById("startDateTime").value,a=document.getElementById("endDateTime").value;r.nQuiz.startDateTime=t,r.nQuiz.endDateTime=a,r.dateVerified=null,r.datesError=null;var n=new Date(t);n.setMilliseconds(0),n.setSeconds(0);var o=new Date(a);o.setMilliseconds(0),o.setSeconds(0),n<e?(r.datesError="start datetime cannot be less than current date time",r.dateVerified=!1):o<=n?(r.datesError="End Date Time must be greater!",r.dateVerified=!1):(r.dateVerified=!0,r.datesError=null),1==r.dateVerified&&null==r.datesError&&r.moveToStep(4)},r.toggleFeatures=function(e){r.nQuiz.featureName,console.log("attempt to toogle retake"+r.nQuiz.reTakeUnique)},r.moveStage=function(e,t){},console.log("new quiz wizard executed"),r.setParent=function(e){r.subCategory=null,r.parentId=e,r.availableInPool=0,r.chosenSubjects=[]},r.setSubCategory=function(e){r.subjectIds=[],r.subCategory=e,r.availableInPool=0,r.chosenSubjects=[]},r.toggleSelectSubjects=function(e){var t=r.subjectIds.indexOf(e);-1==t?r.subjectIds.push(e):r.subjectIds.splice(t,1),r.setAvailableQuestions(),r.setChoosenSubjects()},r.setAvailableQuestions=function(){for(var e in r.availableInPool=0,r.poolSummary)r.poolSummary.hasOwnProperty(e)&&-1!=r.subjectIds.indexOf(r.poolSummary[e].section_id)&&(r.availableInPool+=parseInt(r.poolSummary[e].noQues))},r.setChoosenSubjects=function(){for(var e in r.chosenSubjects=[],r.categories)r.categories.hasOwnProperty(e)&&-1!=r.subjectIds.indexOf(r.categories[e].id)&&r.chosenSubjects.push(r.categories[e])},r.isSubjectActive=function(e){return-1!=r.subjectIds.indexOf(e)},r.stepOneisValid=function(){return!(r.subjectIds.length<1)},r.moveToStep=function(e){5==e?(r.activateDistroState(),t.stage=e):t.stage=e},r.activateDistroState=function(){if(0==r.subjectIds.length)return t.$emit("notify",{type:"error",title:"Categorization",content:"Select all 3 levels in category",timeout:8e3}),t.stage=1,!1;var e={threshold:r.nQuiz.threshold,subject_ids:r.subjectIds};s.loadPreDistributionInfo(e).then((function(e){null!=e.data.distro&&0!=e.data.distro.length&&(r.preDistro=e.data.distro,5!=t.stage&&(t.stage=5))}),(function(e){console.log("cannot move the state at this point")}))},t.$watch("vm.nQuiz.entDateTime",(function(e,t,a){e!=t&&console.log("the value has been changed")}),!0),r.detectChange=function(){console.log("change has beeen detected")},r.getTotal=function(){for(var e in r.Qtotal=0,r.pointsTotal=0,r.subjecTotal=0,r.preDistro)if(r.preDistro.hasOwnProperty(e)){var t=r.preDistro[e];t.quePerSection=parseInt(t.quePerSection),t.points=parseFloat(t.points),t.questions=parseFloat(t.questions),"NaN"==parseInt(t.quePerSection)&&(t.quePerSection=0),"NaN"==parseFloat(t.points)&&(t.points=0),"NaN"==parseFloat(t.questions)&&(t.questions=0),r.subjecTotal+=parseFloat(t.questions),r.Qtotal+=t.quePerSection,r.pointsTotal+=parseFloat(t.points)}},r.saveDistribution=function(n){a({url:e+"quiz/distribution/"+n,method:"PUT",data:r.preDistro}).then((function(o){r.phaseFourStatus="done",r.phaseThreeStatus="working";var i=e+"quiz-question-allocate/"+n;a.post(i).then((function(e){var a={type:"info",title:"Question Allocation",content:e.data.message,timeout:5e3};t.$emit("notify",a),r.phaseThreeStatus="done",r.allDone=!0}),(function(e){var a={type:"error",title:"Question Allocation",content:e.data.message,timeout:5e3};t.$emit("notify",a)}));var s={type:"info",title:"Distrbution",content:o.data.message,timeout:5e3};t.$emit("notify",s)}),(function(e){r.phaseFourStatus="error";var a={type:"error",title:"Distrbution",content:e.data.message,timeout:5e3};t.$emit("notify",a)}))}}]);
angular.module("io2v3").controller("notFoundCtrl",(function(){console.log("not found controller activated")}));
angular.module("io2v3").controller("permissionsCtrl",["API_URL","$scope","$http","$state",function(e,t,s,i){var n=this;t.$parent.base.pageUrl=i.current.url,t.$parent.dash.pageHeading="Permissions",n.pageMode=null,s({method:"GET",url:e+"permissions",cache:!1}).then((function(e){n.dataList=e.data,n.pageMode="list"}),(function(e){console.log("failed"),n.pageMode="error"})),n.savePermission=function(){var i=e+"permissions";n.npermission.name=t.$parent.base.slugify(n.npermission.name),s({url:i,method:"POST",data:n.npermission}).then((function(e){console.log(e.data),n.dataList.permissions.push(e.data.permission[0]),n.npermission={},n.pageMode="list";var s={type:"success",title:"Success",content:e.data.message,timeout:5e3};t.$emit("notify",s)}),(function(e){console.log(e.data);var s={type:"error",title:"Operation Failed",content:e.data.message,timeout:5e3};t.$emit("notify",s)}))},n.removePermission=function(i){var o=t.$parent.base.getIndex(n.dataList.permissions,"id",i);console.log(o),s.delete(e+"permissions/"+i).then((function(e){var s={type:"success",title:"Delete Permission",content:e.data.message,timeout:5e3};t.$emit("notify",s),n.dataList.permissions.splice(o,1)}),(function(e){var s={type:"error",title:"Delete Permission",content:e.data.message,timeout:5e3};t.$emit("notify",s)}))},console.log("controller is activated")}]);
angular.module("io2v3").controller(["nameCtrl","API_URL","$scope",function(o,l){console.log("publc root controller is activated")}]);
angular.module("io2v3").controller("queAddCtrl",["API_URL","$scope","$http","$state","$stateParams","quizDataService","queGlobalData","auth",function(e,t,a,o,n,i,r,u){var s=this;if(s.token=localStorage.getItem("auth_token"),t.apiUrl=e,s.showMediaLibrary=!1,s.mediaLoaded=null,s.questionMedia=[],t.$parent.base.pageUrl=o.current.url,s.optionImageModal=!1,s.enableLink=!1,s.bindTopCategory=!0,console.log(r),s.userRole=u.getUser().role,s.isNumber=angular.isNumber,s.myFormData={},"content developer"==s.userRole||"contributor"==s.userRole){if(s.bindTopCategory=!0,0==r.data.topCategory)return t.$emit("notify",{type:"error",title:"Permission Denied",content:"Top level category was not assinged ",timeout:3e3}),o.go("dash.questions"),!1;s.topBindCategory=r.data.topCategory,setTimeout((function(){s.queCategory=s.topBindCategory,console.log();var e=t.$parent.base.getIndex(s.globalList.cat,"id",s.queCategory.toString());s.topPreSelectCategory=s.globalList.cat[e].tree}))}else s.bindTopCategory=!1;null!=n.examID?t.$parent.exAbs.pageHeading="Add New Questions":t.$parent.dash.pageHeading="Add New Questions",s.addMediaToQuestion=function(e){s.mediaAddedTolist(e.id)||s.questionMedia.push(e)},s.mediaAddedTolist=function(e){return-1!=t.$parent.base.getIndex(s.questionMedia,"id",e)},s.unlinkFromLibrary=function(e){var a=t.$parent.base.getIndex(s.questionMedia,"id",e);s.questionMedia.splice(a,1)},s.enableLibrary=function(){s.showMediaLibrary=!0},s.closeLibrary=function(){s.showMediaLibrary=!1},s.removeMedia=function(e){s.questionMedia.splice(e,1)},null!=n.examID?(s.QuizPrivate=!0,s.examID=n.examID,t.$parent.absExamId=n.examID,i.getMasterQuiz(s.examID).then((function(e){s.quizData=e.data,s.queCategory=s.quizData.quiz[0].category_id})),s.queSection="Select Section"):(s.QuizPrivate=!1,s.queCategory="Select Category",s.queSection="Select Section",s.queDecipline="Sub Descipline"),s.saveReturn=!1,s.queLevel="Select Level",s.queType="Select Type",s.nque={},s.optAns={a:!1,b:!1,c:!1,d:!1},s.fetchGlobal=function(){s.globalList=r.data},s.saveQuestion=function(o=null){if(s.saveReturn="more"==o,3==s.queType){console.log("condition matched");var i=[];for(var r in s.optAns)s.optAns.hasOwnProperty(r)&&1==s.optAns[r]&&i.push(r);s.nque.answer=i.join(","),console.log(s.nque.answer)}var u=e+"questions";s.nque.category_id=s.queCategory,s.nque.section_id=s.queSection,s.nque.level_id=s.queLevel,s.nque.type_id=s.queType,s.questionMedia.length>0&&(s.nque.mediaIds=[],s.questionMedia.forEach((function(e){s.nque.mediaIds.push(e)}))),null!=n.examID&&(s.nque.quiz_id=n.examID),a({url:u,method:"POST",data:s.nque}).then((function(e){s.nque={},s.questionMedia=[];var a={type:"success",title:"Operartion Successful",content:e.data.message,timeout:3e3};if(t.$emit("notify",a),3==s.queType)for(var o in s.optAns)s.optAns.hasOwnProperty(o)&&(s.optAns[o]=!1);s.nque.answer=""}),(function(e){var a={type:"error",title:"Operartion Failed",content:e.data.message,timeout:3e3};t.$emit("notify",a)}))},s.fetchMedia=function(){a.get(e+"media").then((function(e){s.mediaLoaded=!0,s.mediaList=e.data.media}),(function(e){s.mediaLoaded=!1}))},s.fetchGlobal(),s.fetchMedia(),s.sendFile=function(){null!=n.examID?s.myFormData.category_id=s.quizData.quiz[0].category_id:s.myFormData.category_id=s.queCategory;var o=t.photo,i=e+"media",r=new FormData;angular.forEach(o,(function(e){r.append("file",e)}));var u=s.myFormData;for(var l in u)r.append(l,u[l]);a.post(i,r,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then((function(e){var t=e.data.lastItem[0];s.mediaList.push(t)}),(function(e){var a={type:"error",title:"Error",content:e.data.message,timeout:3e3};t.$emit("notify",a)}))},s.activateImageOption=function(a){s.optionLabel=a,console.log(a),s.optionImageModal=!0,s.uploadUrl=e+"queoptionimages/"+a,t.dropzoneConfig={options:{url:s.uploadUrl,multiple:!1,maxFiles:1,thumbnailWidth:null,thumbnailHeight:null,acceptedFiles:".pdf,.png,.jpg,.gif,.bmp,.jpeg",dictDefaultMessage:"Drag or upload option image here",headers:{token:s.token}},eventHandlers:{sending:function(e,t,a){console.log(t)},success:function(e,o){if(o.status){console.log("met condition"),s.enableLink=!0;var n=o.imageUrl,i="option"+a.toUpperCase();s.nque[i]=n,s.closeOptionAttachModal(),t.$apply()}}}}},s.closeOptionAttachModal=function(){s.optionImageModal=!1}}]);
angular.module("io2v3").controller("quepoolCtrl",["API_URL","$scope","$http",function(t,a,e){var o=this;a.$parent.dash.pageHeading="Questions Stats",console.log("que pool is activated");var n=t+"question-section-summary";e.get(n,{cache:!1}).then((function(t){o.dataList=t.data.queSum}))}]);
angular.module("io2v3").controller("questionEditCtrl",["API_URL","$scope","$http","$stateParams","$state",function(e,t,a,n,o){var i=this;i.nque={},t.$parent.base.pageUrl=o.current.url,t.$parent.dash.pageHeading="Edit Question",i.questionID=n.queID,i.pageloading,i.queData=null,a.get(e+"question/"+i.questionID).then((function(e){i.pageloading=!0,i.queData=e.data,i.selectedAnswer=i.queData.question.answer,3==i.queData.question.type_id&&i.initCheckbox()}),(function(e){i.pageloading=!1})),i.initCheckbox=function(){i.optAns={},i.optAns.a=!1,i.optAns.b=!1,i.optAns.c=!1,i.optAns.d=!1;var e=i.queData.question.answer.split(",");for(key in i.optAns)i.optAns.hasOwnProperty(key)&&-1!=e.indexOf(key)&&(i.optAns[key]=!0)},i.prepareCheckboxString=function(){var e=[];for(var t in i.optAns)i.optAns.hasOwnProperty(t)&&1==i.optAns[t]&&e.push(t);i.nque.answer=e.join(",")},i.preparePayload=function(){payload={queDesc:i.queData.question.queDesc,type_id:i.queData.question.type_id},4!=i.queData.question.type_id&&(payload.optionA=i.queData.question.optionA,payload.optionB=i.queData.question.optionB,2!=i.queData.question.type_id&&(payload.optionC=i.queData.question.optionC,payload.optionD=i.queData.question.optionD)),1==i.queData.question.type_id||2==i.queData.question.type_id?payload.answer=i.selectedAnswer:4==i.queData.question.type_id?payload.answer=i.queData.question.answer:payload.answer=i.nque.answer,i.payload=payload},i.triggerUpdate=function(e){3==i.queData.question.type_id&&i.prepareCheckboxString(),i.preparePayload(),i.pushChanges()},i.pushChanges=function(){a({url:e+"question/"+i.questionID,method:"PUT",data:i.payload}).then((function(e){var a={type:"success",title:"Operation Success",content:e.data.message,timeout:3e3};t.$emit("notify",a),o.go("dash.questions")}),(function(e){var a={type:"error",title:"Operation Failed",content:e.data.message,timeout:3e3};t.$emit("notify",a)}))}}]);
angular.module("io2v3").controller("questionPreviewCtrl",["API_URL","$scope","$http","$stateParams",function(t,e,n,o){var i=this;e.baseUrl=t,i.entityLogo=function(){return t+"assets/images/iSkillMetrics-logo.png"},i.questionId=o.questionId,n.get(t+"question/"+i.questionId).then((function(t){i.activeQuestion=t.data.question}),(function(t){})),i.optionhasImage=function(t){return myRegex=/(https?:\/\/.*\.(?:png|jpg|jpeg))/i,myRegex.test(t)},i.launchLightbox=function(t,e){i.lightBoxEnabled=!0,console.log(t),i.fullImageSourceLink=t,i.fullImageTitle=e},i.closeLightBox=function(){i.lightBoxEnabled=!1}}]);
angular.module("io2v3").controller("questionsCtrl",["API_URL","$scope","$http","$stateParams","$window","$state","SITE_URL",function(e,t,o,s,n,i,r){var a=this;a.togglers=!1,t.sortType="$",a.searchQuery="",t.sortReverse=!1,a.selectSortfield=function(e){t.sortType=e},a.launchQuestionPreviewWindow=function(e){var t=r+"questionpreview/"+e;console.log(t),window.quizWindow=window.open(t,"Question Preview","toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=0,fullscreen=yes,width="+screen.availWidth+",height="+screen.availHeight)},a.clearFilters=function(){t.sortType="$",a.searchQuery="",t.sortReverse=!1},a.toggleSort=function(){t.sortReverse=!t.sortReverse},t.$parent.base.pageUrl=i.current.url,t.$parent.dash.pageHeading="Questions",t.fields=[{cat:!1},{decip:!1},{author:!1},{dated:!1},{desc:!0},{answer:!1},{diff:!1},{type:!1},{hits:!1},{scope:!0},{description:!1},{hits:!1},{status:!0}],a.toggleFields=function(e,o){t.fields[o].field=!t.fields[o].field,console.log(t.fields[o].field)},a.questionStatusToggle=function(s,n){console.log(s,n),o({url:e+"questions/status-toggle/"+s,method:"PUT",data:{status:n}}).then((function(e){var o={type:1==n?"success":"warning",title:"Status Updated",content:e.data.message,timeout:3e3};t.$emit("notify",o)}),(function(e){var o={type:"error",title:"Operation Failed",content:e.data.message,timeout:3e3};t.$emit("notify",o)}))},a.loading=null,o.get(e+"questions",{cache:!1}).then((function(e){200==e.status&&(a.loading=!0,a.dataList=e.data,a.questions=a.dataList.questions),204==e.status&&(a.loading="no contents")}),(function(e){a.loading=!1})),$(".scrollable.wrapper").on("scroll",(function(e){if("dash.questions"==i.current.name){var t=e.currentTarget.scrollTop,o=e.currentTarget.scrollHeight-(screen.height-161);t>=o-300&&console.log("load more triggered"),console.log(t+" : "+o)}}))}]);
angular.module("io2v3").controller("questionUploadCtrl",["API_URL","$scope","$http","$state","$stateParams","quizDataService","queGlobalData","auth",function(e,t,a,o,r,i,n,l){var u=this;if(u.isNumber=angular.isNumber,u.userRole=l.getUser().role,t.$parent.base.pageUrl=o.current.url,null==r.examID?t.$parent.dash.pageHeading="Upload Questions":t.$parent.exAbs.pageHeading="Upload Quiz Questions",u.bindTopCategory=!0,u.myFormData={},"content developer"==u.userRole||"contributor"==u.userRole){if(u.bindTopCategory=!0,0==n.data.topCategory)return t.$emit("notify",{type:"error",title:"Permission Denied",content:"Top level category was not assinged ",timeout:3e3}),o.go("dash.questions"),!1;u.topBindCategory=n.data.topCategory,setTimeout((function(){u.queCategory=u.topBindCategory,console.log();var e=t.$parent.base.getIndex(u.globalList.cat,"id",u.queCategory.toString());u.topPreSelectCategory=u.globalList.cat[e].tree}))}else u.bindTopCategory=!1;null!=r.examID?(u.QuizPrivate=!0,u.examID=r.examID,t.$parent.absExamId=r.examID,i.getMasterQuiz(u.examID).then((function(e){u.quizData=e.data,u.queCategory=u.quizData.quiz[0].category_id})),u.queSection="Select Section"):(u.QuizPrivate=!1,u.queCategory="Select Category",u.queSection="Select Section",u.queDecipline="Sub Descipline"),u.fetchGlobal=function(){u.globalList=n.data},u.fetchGlobal(),u.sendUploadRequest=function(){var r=t.photo;if(null==r)return t.$emit("notify",{type:"error",title:"Validation Error",content:"Please attach CSV file",timeout:3e3}),!1;var i=e+"questions-bulk";u.myFormData.category_id=u.queCategory,u.myFormData.section_id=u.queSection,u.myFormData.type_id=u.queType,u.myFormData.level_id=u.queLevel,console.log(u.myFormData);var n=new FormData;angular.forEach(r,(function(e){n.append("file",e),console.log(e)}));var l=u.myFormData;for(var s in l)n.append(s,l[s]);a.post(i,n,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then((function(e){var a={type:"success",title:"Operation Successfull",content:e.data.message,timeout:3e3};t.$emit("notify",a),o.go("dash.questions")}),(function(e){var a={type:"error",title:"Operation Failed",content:e.data.message,timeout:3e3};t.$emit("notify",a)}))}}]);
angular.module("io2v3").controller("quizAnswerConsentCtrl",["API_URL","$scope","$http","$stateParams",function(a,e,t,n){var o=this;o.examID=n.examID,e.$parent.absExamId=o.examID;var s=n.attemptID,r=a+"quiz/inspectanswers/"+o.examID+"/"+s;e.$parent.exAbs.pageHeading="Consent",t.get(r).then((function(a){console.log(a),o.dataList=a.data}),(function(a){console.log(a)}))}]);
angular.module("io2v3").controller("quizAnswerInpectCtrl",["API_URL","$scope","$http","$stateParams",function(a,e,t,n){var o=this;o.examID=n.examID,e.$parent.absExamId=o.examID;var s=n.attemptID;e.$parent.exAbs.pageHeading="Inspection";var r=a+"quiz/inspectanswers/"+o.examID+"/"+s;t.get(r).then((function(a){console.log(a),o.dataList=a.data}),(function(a){console.log(a)}))}]);
angular.module("io2v3").controller("quizAttemptCtrl",["API_URL","$scope","$http","$state","$stateParams","quizPlayData","$timeout",function(e,t,n,i,a,s,o){var r=this;if(r.quizData=s.data,r.timeexpiration=!1,t.cachedImages=[],0!=r.quizData.imagesPreload.length){t.imageLocations=r.quizData.imagesPreload;var u=new RegExp("^(http|https)://","i");t.imageLocations.forEach((function(t){t=decodeURIComponent(t),u.test(t)||(console.log(t+"is absolute"),t=e+t);let n=new Request(t);fetch(n,{mode:"no-cors"}).then((function(e){caches.open("quizImageCache").then((function(t){t.put(n,e.clone())}))})).catch((function(e){console.log(error)}))}))}if(r.entityLogo=function(){return r.quizData.entityLogo[0].logo?e+r.quizData.entityLogo[0].logo:"assets/images/iSkillMetrics-logo.svg"},r.lightBoxEnabled=!1,null!=r.quizData.action&&"redirect"==r.quizData.action)return i.go("onExamRefresh",{quiz_id:a.quiz_id,attempt_id:a.attempt_id});r.optionhasImage=function(e){return myRegex=/(https?:\/\/.*\.(?:png|jpg|jpeg))/i,myRegex.test(e)},r.closeCurrentWindow=function(){console.log("attempt to close window"),console.log(window.quizWindow),null!=window.quizWindow?(console.log("quiz window attached to root"),window.quizWindow.close()):(console.log("redirect compilted page"),i.go("quizcomplited"))},r.questionIndex=0,r.endActivated=!1,r.reviewAll=!1,r.activeQuestion=r.quizData.questions[r.questionIndex];var d=a.attempt_id;r.ShowPulse=!1,r.TimeStatus="high",t.baseUrl=e,r.hasPre=!1,r.hasMore=!0,r.showEndQuiz=!1,r.save=function(){var i=e+"std-patch-answers";o.cancel(r.quizTimeInterval);var a=localStorage.getItem("lastStoredDurationSeconds"),s=r.timeexpiration?"timeout":"explicit";r.quizMeta={endState:s,timeLeft:a},r.idbPayload={url:i,method:"POST",data:{answers:r.payloadAnswers,quizMeta:r.quizMeta}},n(r.idbPayload).then((function(e){t.$emit("playSound",{message:"quiz-end"}),r.closeCurrentWindow()}),(function(e){e.status<1&&(console.log("LOST IC Trigger BackgroundSync"),r.idbPayload.data.quizMeta.endState="Network Lost",r.triggerBackgroundSync(r.idbPayload),t.$emit("notify",{type:"warning",title:"Internet Disconnected",content:"Progress has been saved and pushed to server as connection resumes",timeout:3e3}),setTimeout((function(){r.closeCurrentWindow(),t.$emit("playSound",{message:"quiz-end"})}),2e3))})),localStorage.removeItem("lastStoredDurationSeconds")},r.triggerBackgroundSync=function(e){var t={form_data:e};navigator.serviceWorker.controller.postMessage(t),navigator.serviceWorker.addEventListener("message",e=>{1==e.data.status&&null!=window.cachedRegisterSW&&window.cachedRegisterSW.sync.register("exam")})},r.validAnswer=function(){if(null==r.activeQuestion.answer)return!1;if("object"==typeof r.activeQuestion.answer){for(var e in r.activeQuestion.answer)if(r.activeQuestion.answer.hasOwnProperty(e)&&1==r.activeQuestion.answer[e])return!0;return!1}return""!=r.activeQuestion.answer},r.ansPrep=function(){for(var e in r.answerAvailable=!0,r.payloadAnswers=[],r.endActivated=!0,r.providedAnswers){var t=r.providedAnswers[e].answer;if("object"==typeof t){var n=[];for(var i in t)t.hasOwnProperty(i)&&1==t[i]&&n.push(i);n.sort(),t=n.join(",")}var a={attempt_id:d,question_id:r.providedAnswers[e].questionId,answer:t};r.payloadAnswers.push(a)}r.answerAvailable=!0,r.save()},r.markedQuestions=[],r.providedAnswers=[],r.startReviewWizard=null,r.startReview=function(){r.startReviewWizard=!0,r.quizData.questions=r.markedQuestions,r.questionIndex=0,r.activeQuestion=r.markedQuestions[r.questionIndex]},r.startReviewAll=function(){for(var e in r.quizData.questions=r.providedAnswers,r.quizData.questions)r.quizData.questions.hasOwnProperty(e)&&null!=r.quizData.questions[e].marked&&delete r.quizData.questions[e].marked;r.questionIndex=0,r.activeQuestion=r.quizData.questions[r.questionIndex],r.reviewAll=!0,r.hasPre=!1,r.startReviewWizard=!1,r.markedQuestions=[],r.isLastQue=!1},r.revNext=function(){if(!(r.validAnswer()&&r.questionIndex+1<=r.markedQuestions.length))return!1;r.providedAnswers.push(r.activeQuestion),r.pushActivity(r.questionIndex),r.questionIndex+=1,r.activeQuestion=r.markedQuestions[r.questionIndex],t.$emit("playSound",{message:"quiz-next"})},r.isReviewEnabled=function(){return 0==r.hasMore&&0!=r.markedQuestions.length},r.nextQuestion=function(){var e=parseInt(t.$parent.base.getIndex(r.providedAnswers,"id",r.activeQuestion.id)),n=parseInt(t.$parent.base.getIndex(r.markedQuestions,"id",r.activeQuestion.id));if(!(r.validAnswer()||null!=r.activeQuestion.marked&&0!=r.activeQuestion.marked))return r.ShowPulse=!0,t.$emit("playSound",{message:"error"}),!1;1==r.activeQuestion.marked?(-1==n&&0==r.reviewAll&&(r.markedQuestions.push(r.activeQuestion),r.ShowPulse=!1),-1!=e&&(r.providedAnswers.splice(e,1),r.ShowPulse=!1)):!r.validAnswer()||null!=r.activeQuestion.marked&&0!=r.activeQuestion.marked||(-1==e&&(r.providedAnswers.push(r.activeQuestion),r.ShowPulse=!1),-1!=n&&(r.markedQuestions.splice(n,1),r.ShowPulse=!1)),r.pushActivity(r.questionIndex),r.questionIndex+=1,r.activeQuestion=r.quizData.questions[r.questionIndex],r.checkNextPre(),t.$emit("playSound",{message:"quiz-next"})},r.preQuestion=function(){t.$emit("playSound",{message:"quiz-prev"}),r.questionIndex-=1,r.activeQuestion=r.quizData.questions[r.questionIndex],r.checkNextPre()},r.checkNextPre=function(){0==r.questionIndex?(r.hasPre=!1,r.isLastQue=!1,r.hasMore=!0):r.questionIndex+1>=r.quizData.questions.length+1?(r.hasMore=!1,0==r.markedQuestions.length&&(r.isLastQue=!0)):0!=r.questionIndex&&(r.hasPre=!0),r.questionIndex+1<r.quizData.questions.length+1&&(r.hasMore=!0,r.isLastQue=!1)},r.checkNextPre(),r.getLeftDurationInSeconds=function(){return localStorage.hasOwnProperty("lastStoredDurationSeconds")&&!isNaN(localStorage.getItem("lastStoredDurationSeconds"))?localStorage.getItem("lastStoredDurationSeconds"):60*parseInt(r.quizData.quiz[0].duration)};var l=r.getLeftDurationInSeconds(),c=l/60|0,m=l%60|"00";t.timeLeft=c+":"+m,r.startTimer=function(e){var n,i,a,s=Date.now();!function u(){n=e-((Date.now()-s)/1e3|0);var d=60*(i=n/60|0)+(a=n%60|0),l=Math.round(d/(60*parseInt(r.quizData.quiz[0].duration))*100);if(r.TimeStatus=l>=70?"high":l>=50?"med":"low",localStorage.setItem("lastStoredDurationSeconds",d),i=i<10?"0"+i:i,a=a<10?"0"+a:a,t.timeLeft=i+":"+a,n<=0)return r.timeexpiration=!0,r.manageTimeOutSubmission(),!1;r.quizTimeInterval=o(u,1e3)}()},r.startTimer(l),r.manageTimeOutSubmission=function(){r.timeexpiration=!0,t.$emit("playSound",{message:"quiz-timeout"}),0==r.markedQuestions.length&&r.providedAnswers.length==r.quizData.quiz[0].noques?r.ansPrep():r.markedQuestions.length==r.quizData.quiz[0].noques-r.providedAnswers.length&&0!=r.providedAnswers.length?r.manageMarkedOnTimeOut():r.markedQuestions.length==r.quizData.quiz[0].noques&&0==r.providedAnswers.length?r.manageMarkedOnTimeOut():0==r.markedQuestions.length&&0==r.providedAnswers.length?r.manageNoActivtiyOnTimeOut():0==r.markedQuestions.length&&r.providedAnswers.length!=r.quizData.quiz[0].noques?r.managePartiallyAnsweredNoMarked():0!=r.markedQuestions.length&&r.providedAnswers.length!=r.quizData.quiz[0].noques&&r.manageTimoutAllAspect(),r.endActivated=!0},r.manageMarkedOnTimeOut=function(){for(var e in r.markedQuestions){var t=r.markedQuestions[e];null==t.answer&&(t.answer="u/a"),r.providedAnswers.push(t)}r.ansPrep()},r.manageNoActivtiyOnTimeOut=function(){for(var e in r.quizData.questions,r.quizData.questions){var t=r.quizData.questions[e];t.answer="u/a",r.providedAnswers.push(t)}r.ansPrep()},r.managePartiallyAnsweredNoMarked=function(){var e=[];for(var t in r.providedAnswers){var n=r.providedAnswers[t];e.push(n.questionId)}for(var t in r.quizData.questions)n=r.quizData.questions[t],e.includes(n.questionId)||(null==n.answer&&(n.answer="u/a"),r.providedAnswers.push(n));r.ansPrep()},r.manageTimoutAllAspect=function(){for(var e in r.markedQuestions)null==(n=r.markedQuestions[e]).answer&&(n.answer="u/a"),r.providedAnswers.push(n);var t=[];for(var e in r.providedAnswers){var n=r.providedAnswers[e];t.push(n.questionId)}for(var e in r.quizData.questions)n=r.quizData.questions[e],t.includes(n.questionId)||(null==n.answer&&(n.answer="u/a"),r.providedAnswers.push(n));r.ansPrep()},r.implodeSingleAnswer=function(e){if("object"==typeof e){var t=[];for(var n in e)e.hasOwnProperty(n)&&1==e[n]&&t.push(n);return t.sort(),t.join(",")}return e},r.pushActivity=function(t){var n=r.quizData.questions[t],i={attempt_id:a.attempt_id,question_id:n.questionId,answer:r.implodeSingleAnswer(n.answer),atype:r.startReviewWizard?"a":n.marked?"m":"a",questionIndex:r.startReviewWizard?t+r.providedAnswers.length:t+1},s=e+"recordActivity";$.ajax({type:"POST",url:s,data:i,dataType:"json",success:function(e){console.log("acivity pushed to server")}})},r.launchLightbox=function(e,t){r.lightBoxEnabled=!0,console.log(e),r.fullImageSourceLink=e,r.fullImageTitle=t},r.closeLightBox=function(){r.lightBoxEnabled=!1}}]);
angular.module("io2v3").controller("quizcomplitedCtrl",["API_URL","$scope","$http","$stateParams",function(o,t,e,l){console.log("quizcomplitedCtrl: activated"),this.attemptClose=function(){var o=window.open("about:blank","_self");setTimeout((function(){o.close()}),300),open(location,"_self").close()}}]);
angular.module("io2v3").controller("quizCtrl",["API_URL","$scope","$http",function(o,l,e){console.log("quiz controller where is it")}]);
angular.module("io2v3").controller("quizDlsCtrl",["API_URL","$scope","$http","$stateParams","quizPlayData","$timeout","$state","$rootScope",function(e,t,i,o,n,r,a,c){var s=this;if(s.timeexpiration=!1,t.cachedImages=[],s.quizData=n.data,s.lightBoxEnabled=!1,0!=s.quizData.imagesPreload.length){t.imageLocations=s.quizData.imagesPreload;var u=new RegExp("^(http|https)://","i");t.imageLocations.forEach((function(t){t=decodeURIComponent(t),u.test(t)||(console.log(t+"is absolute"),t=e+t);let i=new Request(t);fetch(i,{mode:"no-cors"}).then((function(e){caches.open("quizImageCache").then((function(t){t.put(i,e.clone())}))})).catch((function(e){console.log(error)}))}))}if(s.optionhasImage=function(e){return myRegex=/(https?:\/\/.*\.(?:png|jpg|jpeg))/i,myRegex.test(e)},s.entityLogo=function(){return s.quizData.entityLogo[0].logo?e+s.quizData.entityLogo[0].logo:"assets/images/iSkillMetrics-logo.svg"},null!=s.quizData.action&&"redirect"==s.quizData.action)return a.go("onExamRefresh",{quiz_id:o.quiz_id,attempt_id:o.attempt_id});s.returnFormattedAnswer=function(e){if(s.payloadAnswers=[],"object"==typeof e){var t=[];for(var i in e)e.hasOwnProperty(i)&&1==e[i]&&t.push(i);return t.sort(),e=t.join(",")}return e},s.closeCurrentWindow=function(){console.log("attempt to close window"),console.log(window.quizWindow),null!=window.quizWindow?(console.log("quiz window attached to root"),window.quizWindow.close()):(console.log("redirect compilted page"),a.go("quizcomplited"))},s.levels=["easy","medium","difficult"],s.activeLevel=s.levels[0],s.questionIndex=0,s.currentSubjectIndex=0,s.quiz=s.quizData.quiz,s.endOfSubjects=!1,s.diffDirection=0,s.endActivated=!1,s.endProcessActivated=!1,s.TimeStatus="high",s.requiredQuestions=parseInt(s.quiz.noques),s.stream=s.quizData.stream,s.quiz.noques,s.switchFrequency=1,s.mainNext=!1,s.noSubjects=s.stream.distribution.length,s.currentSubjectName=s.stream.distribution[s.currentSubjectIndex].subjects,s.startReviewWizard=!1,s.reviewAll=!1,s.startReviewAll=function(){s.reviewAll=!0,s.questionIndex=0},s.revNext=function(){s.questionIndex+1<s.quiz.noques?(t.$emit("playSound",{message:"quiz-next"}),s.pushAnswerToActivity(),s.questionIndex+=1):(s.pushAnswerToActivity(),s.triggerProcessEndQuiz())},s.questions=[],s.initializeQuestions=function(){console.log("question inint subject "+s.currentSubjectName+" difflevel "+s.activeLevel);var e=s.stream.collections[s.currentSubjectName].composite[s.activeLevel][0];s.questions.push(e),s.stream.collections[s.currentSubjectName].composite[s.activeLevel].splice(0,1),console.log("stampAnswer"+e.stamp),s.mainNext=!0},s.questionAvailableInCurrentDifficultyLevel=function(){console.log("questions available diff intercept"+s.diffDirection+s.activeLevel),1==s.diffDirection?"medium"==s.activeLevel?0!=s.stream.collections[s.currentSubjectName].composite[s.activeLevel].length?s.activeLevel="medium":0==s.stream.collections[s.currentSubjectName].composite[s.activeLevel].length&&0!=s.stream.collections[s.currentSubjectName].composite.difficult.length?(console.log("Updrade : no question in medium skiped to difficult"),s.activeLevel="difficult"):0!=s.stream.collections[s.currentSubjectName].composite.easy.length?console.log("upgrade but downn graded to easy no question is medium and diffult"):console.log("upgrade : unknown condition"):"difficult"==s.activeLevel&&(console.log("intercept from diffcult"),0!=s.stream.collections[s.currentSubjectName].composite[s.activeLevel].length?s.activeLevel="difficult":0==s.stream.collections[s.currentSubjectName].composite[s.activeLevel].length&&0!=s.stream.collections[s.currentSubjectName].composite.medium.length?(s.activeLevel="medium",console.log("upgrade : but downgrading to medium no questions remain in difficult")):0==s.stream.collections[s.currentSubjectName].composite[s.activeLevel].length&&0==s.stream.collections[s.currentSubjectName].composite.medium.length&&0!=s.stream.collections[s.currentSubjectName].composite.easy.length&&(s.activeLevel="easy",console.log("upgrade : but switched to easy no question in med or difficult"))):-1==s.diffDirection?"medium"==s.activeLevel?0!=s.stream.collections[s.currentSubjectName].composite[s.activeLevel].length?s.activeLevel="medium":0!=s.stream.collections[s.currentSubjectName].composite.easy.length?(s.activeLevel="easy",console.log("downgrade : switched from med to easy no question available in")):(s.activeLevel="dificult",console.log("downgrade : switched from med to difficult no question available in medium or easy")):"easy"==s.activeLevel&&(0!=s.stream.collections[s.currentSubjectName].composite[s.activeLevel].length?s.activeLevel="easy":0!=s.stream.collections[s.currentSubjectName].composite.medium.length?s.activeLevel="medium":s.activeLevel="difficult"):0==s.diffDirection&&("easy"==s.activeLevel?0!=s.stream.collections[s.currentSubjectName].composite.easy.length?s.activeLevel="easy":0!=s.stream.collections[s.currentSubjectName].composite.medium.length?s.activeLevel="medium":s.activeLevel="difficult":"medium"==s.activeLevel?0!=s.stream.collections[s.currentSubjectName].composite.medium.length?s.activeLevel="medium":0!=s.stream.collections[s.currentSubjectName].composite.difficult.length?s.activeLevel="difficult":s.activeLevel="easy":"difficult"==s.activeLevel&&(0!=s.stream.collections[s.currentSubjectName].composite.difficult.length?s.activeLevel="difficult":0!=s.stream.collections[s.currentSubjectName].composite.medium.length?s.activeLevel="medium":s.activeLevel="easy"))},s.initializeQuestions(),s.prepareSubjectPerformanceIndicatorProperties=function(){for(var e=0;e<s.noSubjects;e++)s.stream.distribution[e].PerformanceIndicator={easy:[],medium:[],difficult:[]}},s.prepareSubjectPerformanceIndicatorProperties(),s.pushAnswerToActivity=function(){var t=s.questionIndex,i=s.questions[t],n=s.returnFormattedAnswer(i.answer),r={attempt_id:o.attempt_id,question_id:i.questionId,answer:n,atype:"a",questionIndex:++t};console.log(r);var a=e+"recordActivity";$.ajax({type:"POST",url:a,data:r,dataType:"json",success:function(e){console.log("activity logged to server")}})},s.primaryNextProcedure=function(){s.validAnswer()&&null!=s.questions[s.questionIndex].answer?(s.mainNext=!1,console.log(s.questions[s.questionIndex].answer),s.markSubjectAnswered(),s.questions.length<s.quiz.noques?(s.pushIndicator(),s.difficultyProcedure(),s.questionAvailableInCurrentDifficultyLevel(),s.initializeQuestions(),console.log("push activity checkpoint"),s.pushAnswerToActivity(),s.questionIndex+=1,t.$emit("playSound",{message:"quiz-next"})):s.questions.length==s.quiz.noques&&(s.pushAnswerToActivity(),s.endActivated=!0)):(console.log("invalid attempt"),t.$emit("playSound",{message:"error"}))},s.subjectProcedure=function(){console.log("called subject procedure"),s.currentSubjectIndex+1<s.noSubjects?s.currentSubjectIndex+=1:s.endOfSubjects=!0,s.currentSubjectName=s.stream.distribution[s.currentSubjectIndex].subjects},s.difficultyProcedure=function(){var e=s.levelSwitchCheckpoint(s.switchFrequency);s.difficultySwitcher(e),(s.stream.distribution[s.currentSubjectIndex].subjectOverloaded||s.endOfSubjects)&&s.subjectProcedure()},s.difficultySwitcher=function(e){1===e?(s.diffDirection=1,console.log("difficulty detected"),"easy"==s.activeLevel?(console.log("upgraded to medium from easy"),s.activeLevel="medium"):"medium"==s.activeLevel?(console.log("upgraded to difficult from medium"),s.activeLevel="difficult"):console.log("upgrade already at difficult level")):-1===e?(s.diffDirection=-1,console.log("Downgrade deteced from"+s.activeLevel),"difficult"==s.activeLevel?(console.log("downgraded to medium from difficult"),s.activeLevel="medium"):"medium"==s.activeLevel?(s.activeLevel="easy",console.log("downgraded to easy from medium")):(console.log("downgraded already at easy"),s.activeLevel="easy")):0===e&&(console.log("no change in difficulty action level :  "+e),s.diffDirection=0)},s.levelSwitchCheckpoint=function(e){var t=s.activeLevel,i=s.stream.distribution[s.currentSubjectIndex].PerformanceIndicator[t].length;return console.log(s.stream.distribution[s.currentSubjectIndex].PerformanceIndicator),console.log("inicator length"+i),i>=e?(console.log("indicator length"+i),s.stream.distribution[s.currentSubjectIndex].PerformanceIndicator[t].slice(-e).reduce((e,t)=>e+t,0)==e?1:-1):0},s.markSubjectAnswered=function(){var e=parseInt(s.stream.distribution[s.currentSubjectIndex].quePerSection);null==s.stream.distribution[s.currentSubjectIndex].answered?s.stream.distribution[s.currentSubjectIndex].answered=1:e>parseInt(s.stream.distribution[s.currentSubjectIndex].answered)&&(s.stream.distribution[s.currentSubjectIndex].answered+=1),e==parseInt(s.stream.distribution[s.currentSubjectIndex].answered)&&(s.stream.distribution[s.currentSubjectIndex].subjectOverloaded=!0,console.log("subject overloaded"))},s.pushIndicator=function(){var e=s.returnFormattedAnswer(s.questions[s.questionIndex].answer),t=e==s.questions[s.questionIndex].stamp?1:0;console.log("provided Answer :"+e),console.log("correct answer :"+s.questions[s.questionIndex].stamp);var i=s.activeLevel;s.stream.distribution[s.currentSubjectIndex].PerformanceIndicator[i].push(t),t?console.log("correct response answer"):console.log("incorrect response answer")},s.validAnswer=function(){if(null==s.questions[s.questionIndex].answer)return!1;if("object"==typeof s.questions[s.questionIndex].answer){for(var e in s.questions[s.questionIndex].answer)if(s.questions[s.questionIndex].answer.hasOwnProperty(e)&&1==s.questions[s.questionIndex].answer[e])return!0;return!1}return""!=s.questions[s.questionIndex].answer},s.triggerProcessEndQuiz=function(){s.endProcessActivated=!0,s.buildPayloadSanitizeAnswers(),s.save(),localStorage.hasOwnProperty("lastStoredDurationSeconds")&&localStorage.removeItem("lastStoredDurationSeconds")},s.buildPayloadSanitizeAnswers=function(){s.payloadAnswers=[];var e=o.attempt_id;for(var t in s.questions){var i=s.questions[t].answer;if("object"==typeof i){var n=[];for(var r in i)i.hasOwnProperty(r)&&1==i[r]&&n.push(r);n.sort(),i=n.join(",")}else null==i&&(i="u/a");var a={attempt_id:e,question_id:s.questions[t].questionId,answer:i};s.payloadAnswers.push(a)}},s.triggerBackgroundSync=function(e){var t={form_data:e};navigator.serviceWorker.controller.postMessage(t),navigator.serviceWorker.addEventListener("message",e=>{1==e.data.status&&null!=window.cachedRegisterSW&&window.cachedRegisterSW.sync.register("exam")})},s.save=function(){var o=e+"std-patch-answers";r.cancel(s.quizTimeInterval);var n=localStorage.getItem("lastStoredDurationSeconds"),a=s.timeexpiration?"timeout":"explicit";s.quizMeta={endState:a,timeLeft:n},s.idbPayload={url:o,method:"POST",data:{answers:s.payloadAnswers,quizMeta:s.quizMeta}},i(s.idbPayload).then((function(e){t.$emit("playSound",{message:"quiz-end"}),s.closeCurrentWindow()}),(function(e){e.status<1&&(s.idbPayload.data.quizMeta.endState="Network Lost",s.triggerBackgroundSync(s.idbPayload)),s.closeCurrentWindow(),t.$emit("playSound",{message:"quiz-end"})}))},s.getLeftDurationInSeconds=function(){return localStorage.hasOwnProperty("lastStoredDurationSeconds")&&!isNaN(localStorage.getItem("lastStoredDurationSeconds"))?localStorage.getItem("lastStoredDurationSeconds"):60*parseInt(s.quiz.duration)};var l=s.getLeftDurationInSeconds(),d=l/60|0,m=l%60|"00";t.timeLeft=d+":"+m,s.startTimer=function(e){var i,o,n,a=Date.now();!function c(){i=e-((Date.now()-a)/1e3|0);var u=60*(o=i/60|0)+(n=i%60|0),l=Math.round(u/(60*parseInt(s.quiz.duration))*100);if(s.TimeStatus=l>=70?"high":l>=50?"med":"low",localStorage.setItem("lastStoredDurationSeconds",u),o=o<10?"0"+o:o,n=n<10?"0"+n:n,t.timeLeft=o+":"+n,i<=0)return s.timeexpiration=!0,t.$emit("playSound",{message:"quiz-timeout"}),s.manageTimeOutSubmission(),!1;s.quizTimeInterval=r(c,1e3)}()},s.startTimer(l),s.manageTimeOutSubmission=function(){s.triggerProcessEndQuiz()},s.launchLightbox=function(e,t){s.lightBoxEnabled=!0,console.log(e),s.fullImageSourceLink=e,s.fullImageTitle=t},s.closeLightBox=function(){s.lightBoxEnabled=!1}}]);
angular.module("io2v3").controller("quizProgressCtrl",["API_URL","$scope","$http","$stateParams",function(a,e,t,n){var r=this;r.examID=n.examID,e.$parent.absExamId=r.examID,r.loadStatus=null,e.$parent.exAbs.pageHeading="Progress Details",r.activeId=!1,r.enableScoreCard=!1,r.scoreLoading=null,r.dualColumnEnabled=!1,r.enabledScoreUpdateId=!1,r.answerEnabled=!1,r.answerLoading=null,r.dataList=null,r.loadPrimaryData=function(){var e=a+"quiz/progress/"+r.examID;t.get(e).then((function(a){r.loadStatus=!0,r.dataList=a.data}),(function(a){r.loadStatus=!1}))},r.loadPrimaryData(),r.activateScoreCard=function(e){r.answerEnabled=!1,r.activeId=!1,r.answerLoading=null,r.answerDataList=null,r.enableScoreCard=!0,r.scoreLoading=null,r.activeId=e,r.examID;var n=a+"quiz/scorecard/"+r.examID+"/"+e;r.dualColumnEnabled=!0,t.get(n).then((function(a){r.scoreLoading=!0,r.scoreCard=a.data}),(function(a){r.scoreLoading=!1}))},r.disableScoreCard=function(){r.enableScoreCard=!1,r.activeId=!1,r.scoreCard=!1,r.dualColumnEnabled=!1},r.activateAnswers=function(n){r.enableScoreCard=!1,r.scoreCard=!1,r.dualColumnEnabled=!0,r.answerEnabled=!0,r.answerLoading=null,r.answerDataList=null,r.activeId=n,r.examID;var o=a+"quiz/inspectanswers/"+r.examID+"/"+n;t.get(o).then((function(a){console.log(a),r.answerDataList=a.data,r.answerLoading=!0}),(function(a){r.answerLoading=!1})),r.markPayload=[],r.checkForDuplicates=function(a,e){var t=e.id,n=e.type;for(key in a){if(a[key].id==t&&a[key].type==n)return 1;if(a[key].id==t&&a[key].type!=n)return 2}return 0},r.markForUpdates=function(a,t,n){var o=e.$parent.base.getIndex(r.answerDataList.answers,"answerId",t),d={attempt_id:r.activeId,id:t,que_id:n,type:a};if(0==r.markPayload.length)r.markPayload.push(d),r.answerDataList.answers[o].markedStatus=a;else if(0==r.checkForDuplicates(r.markPayload,d))r.markPayload.push(d),r.answerDataList.answers[o].markedStatus=a;else if(1==r.checkForDuplicates(r.markPayload,d)){var s=e.$parent.base.getIndex(r.markPayload,"id",t);r.markPayload.splice(s,1),r.answerDataList.answers[o].markedStatus=null}else 2==r.checkForDuplicates(r.markPayload,d)&&(s=e.$parent.base.getIndex(r.markPayload,"id",t),r.markPayload[s]=d,r.answerDataList.answers[o].markedStatus=a)}},r.processMarkedAnswers=function(){r.activeId;var e=a+"markandudpateanswers/"+r.activeId;t({url:e,method:"POST",data:{dataMarkedPayload:r.markPayload}}).then((function(a){console.log("this is the success call"),r.activeId=!1,r.enableScoreCard=!1,r.scoreCard=!1,r.dualColumnEnabled=!1,r.markPayload=[],r.answerEnabled=!1,r.answerLoading=null,r.dataList=null,r.enabledScoreUpdateId=!1,r.loadPrimaryData()}),(function(a){console.log("the error call")}))},r.deactivateAnswers=function(){r.dualColumnEnabled=!1,r.answerEnabled=!1,r.activeId=!1,r.answerLoading=null},r.enableScoreMatrix=function(a){r.enabledScoreUpdateId=a},r.deactivateMarkUpdateMode=function(){r.enabledScoreUpdateId=!1,r.markPayload=[]},r.attemptRecover=function(n){var o=a+"quiz/progress/recoverviaactivity/"+n,d=e.$parent.base.getIndex(r.dataList.attempted,"attemptId",n);t.put(o).then((function(a){r.dataList.attempted[d]=a.data.progress[0]}),(function(a){var t={type:"error",title:"Recovery Failed",content:a.data.message,timeout:3e3};e.$emit("notify",t)}))},r.generatePDF=function(e){function t(a){var t=new Blob([a],{type:"application/pdf"});if(window.navigator&&window.navigator.msSaveOrOpenBlob)return void window.navigator.msSaveOrOpenBlob(t);const n=window.URL.createObjectURL(t);var o=document.createElement("a");o.href=n;var d="scorecard-"+r.examID+"-"+e+".pdf";o.download=d,o.click(),setTimeout((function(){window.URL.revokeObjectURL(n)}),100)}var n="ddx";localStorage.auth_token&&(n=localStorage.auth_token);var o=a+"scorecard-pdf/"+r.examID+"/"+e,d={method:"POST",headers:new Headers({"content-type":"application/pdf; charset=utf-8",token:n})};fetch(o,d).then(a=>a.blob()).then(t)}}]);
angular.module("io2v3").controller("quizQuestionsCtrl",["API_URL","SITE_URL","$scope","$http","$stateParams",function(t,e,n,a,o){var i=this;i.enableAllocate=!1,n.$parent.exAbs.pageHeading="Allocated Questions",i.enableSynchronize=!1,i.loading=null,i.examID=o.examID,n.$parent.absExamId=o.examID;var s=t+"quiz-questions/"+i.examID;i.launchQuestionPreviewWindow=function(t){var n=e+"questionpreview/"+t;window.quizWindow=window.open(n,"Question Preview","toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=0,fullscreen=yes,width="+screen.availWidth+",height="+screen.availHeight)},i.toggleqqStatus=function(e,o,s){var l=n.$parent.base.getIndex(i.dataList.questions,"id",e),u=i.dataList.questions[l];console.log(u);var r=t+"quiz-question-status-toggle/"+i.examID+"/"+s;a({url:r,method:"PUT",data:{status:o,qqId:e}}).then((function(t){0==o&&i.syncCheck()}),(function(t){var e={type:"error",title:"Weight Distributon Violation : "+t.data.subject,content:t.data.message,timeout:8e3};n.$emit("notify",e),u.qqStatus=t.data.toggleRequest?"0":"1"}))},i.fetchQuestionList=function(){a.get(s).then((function(t){i.dataList=t.data,i.enableAllocate=!1,i.loading=!0,i.dataList.questions.length>0&&null!=i.dataList.questions&&i.syncCheck();var e=parseInt(i.dataList.threshold.expired),a=parseInt(i.dataList.threshold.threshold);if(n.threshold=a,n.Globalthreshold=parseInt(i.dataList.globalThreshold),n.gThresholdCount=parseInt(i.dataList.gThresholdCount),e>0){var o={type:"warning",title:"Threshold Limit",content:"Quiz threshold of "+a+" reached by "+e+" questions, disable and use lower limit",timeout:16e3};n.$emit("notify",o)}n.gThresholdCount>0&&(o={type:"warning",title:"Global Threshold Limit",content:"Global threshold of "+n.Globalthreshold+" reached by "+n.gThresholdCount+" questions, disable and use lower limit",timeout:16e3},n.$emit("notify",o))}),(function(t){i.enableAllocate=!0,i.loading=!1}))},i.allocateQuestions=function(){var e=t+"quiz-question-allocate/"+i.examID;a.post(e).then((function(t){var e={type:"success",title:"Question Allocated",content:t.data.message,timeout:5e3};n.$emit("notify",e),i.fetchQuestionList()}),(function(t){var e={type:"error",title:"Question Allocation",content:t.data.message,timeout:5e3};n.$emit("notify",e)}))},i.syncCheck=function(){var e=t+"newquestion-available/"+i.examID;a.get(e).then((function(t){if(200==t.status){console.log("matched matched mated"),i.enableSynchronize=!0,i.syncPayload={quiz_id:i.examID,queIDs:t.data.queIDs};var e={type:"info",title:"Synchronize Alert",content:t.data.message,timeout:5e3};n.$emit("notify",e)}}),(function(t){var e={type:"error",title:"Synchronize Error",content:t.data.message,timeout:5e3};n.$emit("notify",e)}))},i.fetchQuestionList(),i.processDoSyncronize=function(){a({url:t+"quiz-question-sycnronize",method:"POST",data:i.syncPayload}).then((function(t){if(console.log(t.data),null!=t.data.newQuestions){for(var e=0;e<=t.data.newQuestions.length-1;e++)i.dataList.questions.push(t.data.newQuestions[e]);i.enableSynchronize=!1;var a={type:"success",title:"Synchronize Status",content:t.data.message,timeout:5e3};n.$emit("notify",a)}}),(function(t){console.log(t.data)}))}}]);
angular.module("io2v3").controller("quizScoreCardCtrl",["API_URL","$scope","$http","$stateParams",function(a,t,e,r){var n=this;n.examID=r.examID,t.$parent.absExamId=n.examID;var o=r.attemptID;t.$parent.exAbs.pageHeading="Scorecard";var c=a+"quiz/scorecard/"+n.examID+"/"+o;e.get(c).then((function(a){n.dataList=a.data}),(function(a){}))}]);
angular.module("io2v3").controller("quizWeightDistroCtrl",["API_URL","$scope","$http","$stateParams","quizDataService",function(t,o,i,a,e){var s=this;s.examID=a.examID,o.$parent.absExamId=s.examID,s.loadProgress=null,s.Qtotal=0,s.pointsTotal=0,s.weightTotal=0,o.$parent.exAbs.pageHeading="Weight Distribution",e.getMasterQuiz(s.examID).then((function(t){console.log(t),s.Quiz=t.data.quiz[0],s.Distro=t.data.quizBaseDistro,s.getTotal()}),(function(t){console.log(t),s.loadProgress=!1})),s.getTotal=function(){for(var t in s.Qtotal=0,s.pointsTotal=0,s.weightTotal=0,s.Distro)if(s.Distro.hasOwnProperty(t)){var o=s.Distro[t];parseInt(o.quePerSection),parseInt(o.questions),s.Qtotal+=parseInt(o.quePerSection),s.pointsTotal+=parseFloat(o.points),parseFloat(o.weight),parseFloat(o.weight),o.weight=o.points/s.Quiz.maxScore*100,s.weightTotal+=o.weight,console.log(o.weight)}s.loadProgress=!0,s.verifyDistribution()},s.verifyDistribution=function(){s.Qtotal!=s.Quiz.noques?s.validDistro=!1:s.pointsTotal!=s.Quiz.maxScore?s.validDistro=!1:100!=s.weightTotal?s.validDistro=!1:s.validDistro=!0},s.saveDistribution=function(){var o=t+"quiz/distribution/"+s.examID;i({url:o,method:"PUT",data:s.Distro}).then((function(t){console.log(t.data)}),(function(t){console.log(t.data)}))}}]);
angular.module("io2v3").controller("recoverCtrl",["API_URL","$scope","$http","$stateParams","$state",function(e,o,t,a,n){var c=this;c.encodedToken=null,c.localvertication=!1,null==a.accesstoken?n.go("ua.login"):(c.encodedToken=o.$parent.base.decodeUrlToken(a.accesstoken),"object"!=typeof c.encodedToken&&n.go("ua.login"),"updatepswonforget"!=c.encodedToken.action&&n.go("ua.login")),console.log(c.encodedToken),c.validateEmail=function(){c.email!=c.encodedToken.email?n.go("ua.login"):c.localvertication=!0},c.attemptUpdatePassword=function(){c.dataPayload={email:c.email,password:c.password},t({url:e+"residue/doaction/"+c.encodedToken.id,method:"PUT",data:c.dataPayload,headers:{accesstoken:a.accesstoken}}).then((function(e){var t={type:"success",title:"Operation Successful",content:e.data.message,timeout:3e3};o.$emit("notify",t),n.go("ua.login")}),(function(e){var t={type:"error",title:"Operation Failed",content:e.data.message,timeout:3e3};o.$emit("notify",t)}))}}]);
angular.module("io2v3").controller("registerCtrl",["API_URL","$scope","$http","$state",function(t,e,r,o){var s=this;s.nuser={},s.register=function(){console.log(s.nuser),s.nuser.password!=s.nuser.cpassword?e.$emit("notify",{type:"error",title:"Error",content:"Both Password Must be the Same",timeout:3e3}):r({url:t+"users",method:"POST",data:s.nuser}).then((function(t){var r={type:"success",title:"Registration Successfull",content:t.data.message,timeout:3e3};e.$emit("notify",r),o.go("ua.login")}),(function(t){var r={type:"error",title:"Error",content:t.data.message,timeout:3e3};e.$emit("notify",r)}))}}]);
angular.module("io2v3").controller("registerEnrollCtrl",["API_URL","$scope","$http","$stateParams",function(e,t,r,a){var n=this;n.examID=a.examID,t.$parent.absExamId=n.examID,t.$parent.exAbs.pageHeading="Register & Enroll Canidates",n.re={},n.regEnroll=function(){n.re.examID=n.examID;var a=e+"register-enroll";n.re.password==n.nPass&&n.re.password.length>5?r({url:a,method:"POST",data:n.re}).then((function(e){n.re={},n.generatedPassword=null,n.nPass=null;var r={type:"success",title:"Enrollment Status",content:e.data.message,timeout:3e3};t.$emit("notify",r)}),(function(e){var r={type:"error",title:"Enrollment Error",content:e.data.message,timeout:3e3};t.$emit("notify",r)})):console.log("both password must match and more then 5 character")},n.generateFromRandom=function(){n.generatedPassword=t.$parent.base.generatePassword(),n.re.password=n.generatedPassword,n.nPass=n.generatedPassword}}]);
angular.module("io2v3").controller("rolePermissionsCtrl",["API_URL","$scope","$http",function(e,t,o){var s=this;t.$parent.dash.pageHeading="Role Permissions",s.pageMode=null,s.ndata={},o({method:"GET",url:e+"role-permissions",cache:!1}).then((function(e){s.dataList=e.data,s.pageMode="list"}),(function(e){console.log("failed"),s.dataList=e.data,s.pageMode="error"})),s.savePermission=function(){o({url:e+"role-permissions",method:"POST",data:s.ndata}).then((function(e){s.dataList.permissions.push(e.data.lastRecord[0]),s.npermission={},s.pageMode="list";var o={type:"success",title:"Success",content:e.data.message,timeout:5e4};t.$emit("notify",o)}),(function(e){console.log(e.data);var o={type:"error",title:"Operation Failed",content:e.data.message,timeout:5e4};t.$emit("notify",o)}))},s.statusToggle=function(s,i,n,a){console.log(n),o({url:e+"role-permissions",method:"PUT",data:{permission_id:i,role_id:n,status:a}}).then((function(e){var o={type:1==e.data.status?"success":"warning",title:"Role Permission",content:e.data.message,timeout:5e3};t.$emit("notify",o)}),(function(e){var o={type:"error",title:"Role Permission",content:e.data.message,timeout:5e3};t.$emit("notify",o)}))},s.remove=function(i,n,a){console.log("role id "+n),console.log("permission id "+a);var r=t.$parent.base.getIndex(s.dataList.permissions,"id",i);o({url:e+"role-permissions/"+i+"/"+n+"/"+a,method:"delete",data:{role_id:n,permission_id:a}}).then((function(e){console.log("remove success"),s.dataList.permissions.splice(r,1)}),(function(e){console.log("remove error")}))},console.log("controller is activated")}]);
angular.module("io2v3").controller("rolesCtrl",["API_URL","$scope","$http","$state",function(e,t,n,a){var o=this;t.$parent.base.pageUrl=a.current.url,t.$parent.dash.pageHeading="Roles",o.loading=null,n({method:"GET",url:e+"roles",cache:!1}).then((function(e){o.dataList=e.data,o.loading=!0}),(function(e){o.loading=!0})),o.resetDefaultPermissions=function(t){n({url:e+"roles-reset-permission/"+t,method:"PUT",data:{}}).then((function(e){}),(function(e){}))}}]);
angular.module("io2v3").controller("stdCtrl",["API_URL","$scope",function(o,t){console.log("Student Abtract controller is activated")}]);
angular.module("io2v3").controller("stdExamCtrl",["API_URL","SITE_URL","$scope","$http","$state","$interval","xToTimeFilter","$rootScope",function(t,e,i,a,o,n,s,l){var u=this;function d(t){0!=t.data.quiz&&(u.hasQuizEnrolled=!0,u.hasPendingQuiz=!0),0!=t.data.attempted&&(u.hasAttemptedQuiz=!0,u.hasQuizEnrolled=!0),0==t.data.quiz&&0==t.data.attempted&&(u.hasQuizEnrolled=!1),u.dataList=t.data}function r(t){0==t.data.quiz&&0==t.data.attempted&&(u.hasQuizEnrolled=!1)}u.quizModal=!1,u.hasQuizEnrolled=null,u.hasPendingQuiz=!1,u.hasAttemptedQuiz=!1,u.isInitiatStart=!1,u.detailModalBox=!1,u.progressDetailsModal=!1,u.poolCounter=0,i.counter=[],i.$parent.std.pageHeading="Quiz",localStorage.removeItem("lastStoredDurationSeconds"),u.initiateQuiz=function(o){u.isInitiatStart=!0,a({url:t+"std-quiz-initiate",method:"POST",data:{enroll_id:o}}).then((function(t){var a=t.data;if(0!=a.usedXTimes){u.quizModal=!1;var o={type:"error",title:"Error",content:a.warning_message,timeout:8e3};return i.$emit("notify",o),!1}if("static"==a.type){s=t.data.attempt_id,u.actQuiz.id;var n=e+"quiz-assement/"+s+"/"+u.actQuiz.id;u.quizModal=!1,u.isInitiatStart=!1,u.actQuiz.validity="progress",window.quizWindow=window.open(n,"Quiz","toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=0,fullscreen=yes,width="+screen.availWidth+",height="+window.innerHeight)}else if("dls"==a.type){var s;s=t.data.attempt_id,u.actQuiz.id,dlsPopupUrl=e+"/quiz-assessment/dls/"+s+"/"+u.actQuiz.id,u.quizModal=!1,u.isInitiatStart=!1,u.actQuiz.validity="progress",window.quizWindow=window.open(dlsPopupUrl,"Quiz","toolbar=0,scrollbars=1,location=0,statusbar=0,menubar=0,resizable=0,fullscreen=yes,width="+screen.availWidth+",height="+window.innerHeight)}else console.log("quiz type is unknown")}),(function(t){console.log(t)}))},u.launchQuizModal=function(t,e=!1){if(e)a=i.$parent.base.getIndex(u.dataList.attempted,"id",t),u.actQuiz=u.dataList.attempted[a];else{var a=i.$parent.base.getIndex(u.dataList.quiz,"id",t);u.actQuiz=u.dataList.quiz[a]}u.quizModal=!0},u.fetchQuizListings=function(){a({url:t+"std-quiz-list",method:"GET"}).then(d,r)},u.fetchQuizListings(),u.showCountdown=function(t,e,a){new Date(e).getTime();var o=new Date(a).getTime(),s=(new Date).getTime();if(o>s){console.log("work for countdown");var l=n((function(){var e=(new Date).getTime(),a=o-e,s=Math.floor(a/864e5),d=Math.floor(a%864e5/36e5),r=Math.floor(a%36e5/6e4),c=Math.floor(a%6e4/1e3);if(a<=0){n.cancel(l);var z=i.$parent.base.getIndex(u.dataList.quiz,"id",t);u.dataList.quiz[z].schedule="eligible"}i.counter[t]=0==s&&0==d?r+" mins "+c+" secs ":s+" DD "+d+" HH "+r+" mm "+c+" ss ",console.log(a)}),1e3)}},u.updateOnFinish=function(e){var a={timestamp:e||null};l.studenExamListPooling=$.ajax({type:"GET",url:t+"std-quiz-polling",data:a,headers:{token:localStorage.auth_token},success:function(t){t.timestamp>0&&(u.poolCounter+=1),u.poolCounter>1&&(console.log("update the list"),u.fetchQuizListings(),console.log(t)),i.$apply(),u.updateOnFinish(t.timestamp)}})},u.updateOnFinish(null),u.activateDetails=function(t,e){u.fetchQuizDetails(t)},u.deactivateDetail=function(){u.detailModalBox=!1},u.fetchQuizDetails=function(e){a({url:t+"quiz/"+e,method:"GET"}).then((function(t){1==t.data.status&&(u.detailModalBox=!0,u.modalQuiz=t.data.quiz[0])}),(function(t){}))},u.activateProgressStatus=function(e){console.log(e),a({url:t+"std-self-progress/"+e,method:"GET"}).then((function(t){1==t.data.status&&(u.mdProgressData=t.data.progress[0],u.progressDetailsModal=!0)}),(function(t){}))},u.deActicateProgressStatus=function(){u.progressDetailsModal=!1}}]);
angular.module("io2v3").controller("stdQuizCtrl",["API_URL","$scope","$timeout",function(o,e,t){e.pageHeading=""}]);
angular.module("io2v3").controller("studentDashboardCtrl",["API_URL","$scope","$http","$stateParams",function(a,t,e,n){t.$parent.std.pageHeading="Main"}]);
angular.module("io2v3").controller("nameCtrl",["API_URL","$scope","$http","$stateParams",function(t,a,o,e){}]);
angular.module("io2v3").controller("usersCtrl",["API_URL","$scope","$http","$state","auth",function(e,t,s,a,o){var n=this;t.sortType="$",n.searchQuery="",t.sortReverse=!1,n.roleLabel=function(e){return"students"==e?"Candidate":"contributor"==e?"Test Developer":e},n.selectSortfield=function(e){t.sortType=e},n.clearFilters=function(){t.sortType="$",n.searchQuery="",t.sortReverse=!1},t.$parent.base.pageUrl=a.current.url,t.$parent.dash.pageHeading="Users",n.loadingStatus=null,n.forceCategoryBound=!1,n.modalOpen=!1,n.modalData,n.permssionModal=!1,n.deleteConfirmModal=!1,n.xUSer=null,n.nUser={},n.addUser=!1,n.userRole=o.getUser().role,n.changePassword=!1,n.userBindCheck=function(){console.log();var e=t.$parent.base.getIndex(n.roles,"id",n.nUser.role_id),s=n.roles[e].role;n.forceCategoryBound="contributor"==s||"content developer"==s},n.generateFromRandom=function(){n.generatedPassword=t.$parent.base.generatePassword(),n.nUser.password=n.generatedPassword,n.nUser.passwordConfirm=n.generatedPassword},n.activateAddUser=function(){n.generatedPassword="",n.nUser="",n.addUser=!0},n.deactivateAddUser=function(){n.generatedPassword="",n.nUser="",n.addUser=!1},n.addNewUser=function(){s({url:e+"users",method:"POST",data:n.nUser}).then((function(e){var s={type:"success",title:"Operation Successfull",content:e.data.message,timeout:3e3};t.$emit("notify",s),n.addUser=!1,n.nUser={},null!=n.dataList?(n.dataList.push(e.data.lastCreatedUser[0]),console.log("with existing list")):(console.log("on empty user list"),n.dataList=e.data.lastCreatedUser,n.loadingStatus=!0)}),(function(e){var s={type:"error",title:"User Creations Failed",content:e.data.message,timeout:3e3};t.$emit("notify",s)}))},n.launchDeleteConfirmation=function(e){n.deleteConfirmModal=!0;var s=t.$parent.base.getIndex(n.dataList,"id",e);n.xUSer=n.dataList[s]},n.closeDeleteModal=function(){n.deleteConfirmModal=!1,n.xUSer=null},n.loadPermissions=function(a){var o=t.$parent.base.getIndex(n.dataList,"id",a);n.modalData=n.dataList[o],s({method:"GET",url:e+"user-permissions/"+a}).then((function(e){n.userPermissions=e.data.userPermissions,n.permssionModal=!0,0==e.data.customPermissionList?n.newCustomPermission=!1:(n.newCustomPermission=!0,n.customPermissionList=e.data.customPermissionList),console.log(e.data)}),(function(e){var s={type:"error",title:"User Permissions",content:e.data.message,timeout:3e3};t.$emit("notify",s)}))},n.launchModal=function(e){var s=t.$parent.base.getIndex(n.dataList,"id",e);n.modalData=n.dataList[s],n.modalOpen=!0,console.log(n.modalData)},n.cpGenerateFromRandom=function(){n.cpGenerated=t.$parent.base.generatePassword(),n.modalData.password=n.cpGenerated,n.modalData.cpassword=n.cpGenerated},n.deactivateChangePassword=function(){n.modalOpen=!1,n.modalData.password="",n.modalData.cpassword="",n.modalData=null,n.cpGenerated=!1},n.udpatePassword=function(){var a=e+"changepassword/"+n.modalData.id,o={password:n.modalData.password};n.modalData.password==n.modalData.cpassword?s({url:a,method:"PUT",data:o}).then((function(e){var s={type:"success",title:"Operation Successfull",content:e.data.message,timeout:3e3};t.$emit("notify",s),n.deactivateChangePassword()}),(function(e){console.log("failed while updating password")})):t.$emit("notify",{type:"error",title:"Validation Error",content:"Both Password must be same",timeout:3e3})},s({method:"GET",url:e+"users",cache:!1}).then((function(e){n.topCategories=e.data.topCategories,n.roles=e.data.roles,200==e.status?(n.dataList=e.data.users,n.loadingStatus=!0):206==e.status&&(n.loadingStatus="no contents")}),(function(e){n.loadingStatus=!1})),n.statustoggle=function(a,o){var r=t.$parent.base.getIndex(n.dataList,"id",a);s({method:"PUT",url:e+"users/status-toggle/"+a,data:{status:o}}).then((function(e){if(1==e.data.user[0].status){var s={type:"success",title:"Operation Successfull",content:e.data.message,timeout:3e3};t.$emit("notify",s)}else s={type:"warning",title:"Operation Successfull",content:e.data.message,timeout:3e3},t.$emit("notify",s)}),(function(e){var s={type:"error",title:"Operation Failed",content:e.data.message,timeout:3e3};t.$emit("notify",s),n.dataList[r].status=1==o?"0":"1"}))},n.resetUserPermissions=function(a,o){s({url:e+"users-permissons/reset/"+a+"/"+o,method:"PUT",data:{}}).then((function(e){var s={type:"success",title:"User Permissions",content:e.data.message,timeout:3e3};t.$emit("notify",s)}),(function(e){var s={type:"error",title:"User Permission",content:e.data.message,timeout:3e3};t.$emit("notify",s)}))},n.addNewUserPermission=function(a){if(isNaN(n.nctp))return t.$emit("notify",{type:"error",title:"Validation",content:"Missing Permission ID",timeout:3e3}),!1;s({url:e+"user-permissions",method:"POST",data:{user_id:a,permission_id:n.nctp}}).then((function(e){var s={type:"success",title:"User Permissions",content:e.data.message,timeout:3e3};t.$emit("notify",s),n.userPermissions.push(e.data.lastAdded[0])}),(function(e){var s={type:"error",title:"User Permissions",content:e.data.message,timeout:3e3};t.$emit("notify",s)}))},n.privatePermissionToggle=function(a,o,n){s({url:e+"users-permissons/status-toggle/"+o+"/"+a,method:"PUT",data:{pStatus:n}}).then((function(e){var s={type:0==e.data.permissionStatus?"warning":"success",title:"User Permissions",content:e.data.message,timeout:3e3};t.$emit("notify",s)}),(function(e){var s={type:"error",title:"User Permission",content:e.data.message,timeout:3e3};t.$emit("notify",s)}))},n.deleteUser=function(a){s({url:e+"users/"+a,method:"DELETE",data:{}}).then((function(e){var s=t.$parent.base.getIndex(n.dataList,"id",a);n.dataList[s].proceedToX=!1,n.deleteConfirmModal=!1,n.xUSer.proceedToX=!1,n.dataList.splice(s,1);var o={type:"warning",title:"OPeration Successfull",content:e.data.message,timeout:3e3};t.$emit("notify",o)}),(function(e){var s={type:"error",title:"OPeration Failed",content:e.data.message,timeout:3e3};t.$emit("notify",s)}))}}]);